<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>An Introduction to Statistical and Data Sciences via R</title>
  <meta name="description" content="An open-source and fully-reproducible electronic textbook bridging the gap between traditional introductory statistics and data science courses.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="An Introduction to Statistical and Data Sciences via R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://moderndive.com/" />
  <meta property="og:image" content="http://moderndive.com/images/logos/book_cover.png" />
  <meta property="og:description" content="An open-source and fully-reproducible electronic textbook bridging the gap between traditional introductory statistics and data science courses." />
  <meta name="github-repo" content="moderndive/moderndive_book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="An Introduction to Statistical and Data Sciences via R" />
  
  <meta name="twitter:description" content="An open-source and fully-reproducible electronic textbook bridging the gap between traditional introductory statistics and data science courses." />
  <meta name="twitter:image" content="http://moderndive.com/images/logos/book_cover.png" />

<meta name="author" content="Chester Ismay and Albert Y. Kim">


<meta name="date" content="2018-10-08">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="images/logos/favicons/apple-touch-icon.png">
  <link rel="shortcut icon" href="images/logos/favicons/favicon.ico" type="image/x-icon">
<link rel="prev" href="5-wrangling.html">
<link rel="next" href="7-multiple-regression.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<link href="libs/dygraphs-1.1.1/dygraph.css" rel="stylesheet" />
<script src="libs/dygraphs-1.1.1/dygraph-combined.js"></script>
<script src="libs/dygraphs-1.1.1/shapes.js"></script>
<script src="libs/moment-2.8.4/moment.js"></script>
<script src="libs/moment-timezone-0.2.5/moment-timezone-with-data.js"></script>
<script src="libs/moment-fquarter-1.0.0/moment-fquarter.min.js"></script>
<script src="libs/dygraphs-binding-1.1.1.6/dygraphs.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-89938436-1', 'auto');
  ga('send', 'pageview');

</script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#sec:intro-for-students"><i class="fa fa-check"></i><b>1.1</b> Introduction for students</a><ul>
<li class="chapter" data-level="1.1.1" data-path="index.html"><a href="index.html#subsec:learning-goals"><i class="fa fa-check"></i><b>1.1.1</b> What you will learn from this book</a></li>
<li class="chapter" data-level="1.1.2" data-path="index.html"><a href="index.html#subsec:pipeline"><i class="fa fa-check"></i><b>1.1.2</b> Data/science pipeline</a></li>
<li class="chapter" data-level="1.1.3" data-path="index.html"><a href="index.html#subsec:reproducible"><i class="fa fa-check"></i><b>1.1.3</b> Reproducible research</a></li>
<li class="chapter" data-level="1.1.4" data-path="index.html"><a href="index.html#final-note-for-students"><i class="fa fa-check"></i><b>1.1.4</b> Final note for students</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#sec:intro-instructors"><i class="fa fa-check"></i><b>1.2</b> Introduction for instructors</a><ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#who-is-this-book-for"><i class="fa fa-check"></i><b>1.2.1</b> Who is this book for?</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#sec:connect-contribute"><i class="fa fa-check"></i><b>1.3</b> Connect and contribute</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#sec:about-book"><i class="fa fa-check"></i><b>1.4</b> About this book</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="2-getting-started.html"><a href="2-getting-started.html"><i class="fa fa-check"></i><b>2</b> Getting Started with Data in R</a><ul>
<li class="chapter" data-level="2.1" data-path="2-getting-started.html"><a href="2-getting-started.html#what-are-r-and-rstudio"><i class="fa fa-check"></i><b>2.1</b> What are R and RStudio?</a><ul>
<li class="chapter" data-level="2.1.1" data-path="2-getting-started.html"><a href="2-getting-started.html#installing-r-and-rstudio"><i class="fa fa-check"></i><b>2.1.1</b> Installing R and RStudio</a></li>
<li class="chapter" data-level="2.1.2" data-path="2-getting-started.html"><a href="2-getting-started.html#using-r-via-rstudio"><i class="fa fa-check"></i><b>2.1.2</b> Using R via RStudio</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="2-getting-started.html"><a href="2-getting-started.html#code"><i class="fa fa-check"></i><b>2.2</b> How do I code in R?</a><ul>
<li class="chapter" data-level="2.2.1" data-path="2-getting-started.html"><a href="2-getting-started.html#programming-concepts"><i class="fa fa-check"></i><b>2.2.1</b> Basic programming concepts needed</a></li>
<li class="chapter" data-level="2.2.2" data-path="2-getting-started.html"><a href="2-getting-started.html#tips-on-learning-to-code"><i class="fa fa-check"></i><b>2.2.2</b> Tips on learning to code</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="2-getting-started.html"><a href="2-getting-started.html#packages"><i class="fa fa-check"></i><b>2.3</b> What are R packages?</a><ul>
<li class="chapter" data-level="2.3.1" data-path="2-getting-started.html"><a href="2-getting-started.html#package-installation"><i class="fa fa-check"></i><b>2.3.1</b> Package installation</a></li>
<li class="chapter" data-level="2.3.2" data-path="2-getting-started.html"><a href="2-getting-started.html#package-loading"><i class="fa fa-check"></i><b>2.3.2</b> Package loading</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="2-getting-started.html"><a href="2-getting-started.html#nycflights13"><i class="fa fa-check"></i><b>2.4</b> Exploring real data</a><ul>
<li class="chapter" data-level="2.4.1" data-path="2-getting-started.html"><a href="2-getting-started.html#nycflights13-package"><i class="fa fa-check"></i><b>2.4.1</b> nycflights13 package</a></li>
<li class="chapter" data-level="2.4.2" data-path="2-getting-started.html"><a href="2-getting-started.html#flights-data-frame"><i class="fa fa-check"></i><b>2.4.2</b> flights data frame</a></li>
<li class="chapter" data-level="2.4.3" data-path="2-getting-started.html"><a href="2-getting-started.html#explore-dataframes"><i class="fa fa-check"></i><b>2.4.3</b> Exploring data frames</a></li>
<li class="chapter" data-level="2.4.4" data-path="2-getting-started.html"><a href="2-getting-started.html#help-files"><i class="fa fa-check"></i><b>2.4.4</b> Help files</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="2-getting-started.html"><a href="2-getting-started.html#conclusion"><i class="fa fa-check"></i><b>2.5</b> Conclusion</a><ul>
<li class="chapter" data-level="2.5.1" data-path="2-getting-started.html"><a href="2-getting-started.html#whats-to-come"><i class="fa fa-check"></i><b>2.5.1</b> What’s to come?</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I Data Science via the tidyverse</b></span></li>
<li class="chapter" data-level="3" data-path="3-viz.html"><a href="3-viz.html"><i class="fa fa-check"></i><b>3</b> Data Visualization via ggplot2</a><ul>
<li class="chapter" data-level="" data-path="3-viz.html"><a href="3-viz.html#needed-packages"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="3.1" data-path="3-viz.html"><a href="3-viz.html#grammarofgraphics"><i class="fa fa-check"></i><b>3.1</b> The Grammar of Graphics</a><ul>
<li class="chapter" data-level="3.1.1" data-path="3-viz.html"><a href="3-viz.html#components-of-the-grammar"><i class="fa fa-check"></i><b>3.1.1</b> Components of the Grammar</a></li>
<li class="chapter" data-level="3.1.2" data-path="3-viz.html"><a href="3-viz.html#gapminder"><i class="fa fa-check"></i><b>3.1.2</b> Gapminder</a></li>
<li class="chapter" data-level="3.1.3" data-path="3-viz.html"><a href="3-viz.html#other-components-of-the-grammar"><i class="fa fa-check"></i><b>3.1.3</b> Other components of the Grammar</a></li>
<li class="chapter" data-level="3.1.4" data-path="3-viz.html"><a href="3-viz.html#the-ggplot2-package"><i class="fa fa-check"></i><b>3.1.4</b> The ggplot2 package</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="3-viz.html"><a href="3-viz.html#FiveNG"><i class="fa fa-check"></i><b>3.2</b> Five Named Graphs - The 5NG</a></li>
<li class="chapter" data-level="3.3" data-path="3-viz.html"><a href="3-viz.html#scatterplots"><i class="fa fa-check"></i><b>3.3</b> 5NG#1: Scatterplots</a><ul>
<li class="chapter" data-level="3.3.1" data-path="3-viz.html"><a href="3-viz.html#geompoint"><i class="fa fa-check"></i><b>3.3.1</b> Scatterplots via geom_point</a></li>
<li class="chapter" data-level="3.3.2" data-path="3-viz.html"><a href="3-viz.html#overplotting"><i class="fa fa-check"></i><b>3.3.2</b> Over-plotting</a></li>
<li class="chapter" data-level="3.3.3" data-path="3-viz.html"><a href="3-viz.html#summary"><i class="fa fa-check"></i><b>3.3.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="3-viz.html"><a href="3-viz.html#linegraphs"><i class="fa fa-check"></i><b>3.4</b> 5NG#2: Linegraphs</a><ul>
<li class="chapter" data-level="3.4.1" data-path="3-viz.html"><a href="3-viz.html#geomline"><i class="fa fa-check"></i><b>3.4.1</b> Linegraphs via geom_line</a></li>
<li class="chapter" data-level="3.4.2" data-path="3-viz.html"><a href="3-viz.html#summary-1"><i class="fa fa-check"></i><b>3.4.2</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="3-viz.html"><a href="3-viz.html#histograms"><i class="fa fa-check"></i><b>3.5</b> 5NG#3: Histograms</a><ul>
<li class="chapter" data-level="3.5.1" data-path="3-viz.html"><a href="3-viz.html#geomhistogram"><i class="fa fa-check"></i><b>3.5.1</b> Histograms via geom_histogram</a></li>
<li class="chapter" data-level="3.5.2" data-path="3-viz.html"><a href="3-viz.html#adjustbins"><i class="fa fa-check"></i><b>3.5.2</b> Adjusting the bins</a></li>
<li class="chapter" data-level="3.5.3" data-path="3-viz.html"><a href="3-viz.html#summary-2"><i class="fa fa-check"></i><b>3.5.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="3-viz.html"><a href="3-viz.html#facets"><i class="fa fa-check"></i><b>3.6</b> Facets</a></li>
<li class="chapter" data-level="3.7" data-path="3-viz.html"><a href="3-viz.html#boxplots"><i class="fa fa-check"></i><b>3.7</b> 5NG#4: Boxplots</a><ul>
<li class="chapter" data-level="3.7.1" data-path="3-viz.html"><a href="3-viz.html#geomboxplot"><i class="fa fa-check"></i><b>3.7.1</b> Boxplots via geom_boxplot</a></li>
<li class="chapter" data-level="3.7.2" data-path="3-viz.html"><a href="3-viz.html#summary-3"><i class="fa fa-check"></i><b>3.7.2</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="3-viz.html"><a href="3-viz.html#geombar"><i class="fa fa-check"></i><b>3.8</b> 5NG#5: Barplots</a><ul>
<li class="chapter" data-level="3.8.1" data-path="3-viz.html"><a href="3-viz.html#barplots-via-geom_bargeom_col"><i class="fa fa-check"></i><b>3.8.1</b> Barplots via geom_bar/geom_col</a></li>
<li class="chapter" data-level="3.8.2" data-path="3-viz.html"><a href="3-viz.html#must-avoid-pie-charts"><i class="fa fa-check"></i><b>3.8.2</b> Must avoid pie charts!</a></li>
<li class="chapter" data-level="3.8.3" data-path="3-viz.html"><a href="3-viz.html#using-barplots-to-compare-two-categorical-variables"><i class="fa fa-check"></i><b>3.8.3</b> Using barplots to compare two categorical variables</a></li>
<li class="chapter" data-level="3.8.4" data-path="3-viz.html"><a href="3-viz.html#summary-4"><i class="fa fa-check"></i><b>3.8.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="3-viz.html"><a href="3-viz.html#conclusion-1"><i class="fa fa-check"></i><b>3.9</b> Conclusion</a><ul>
<li class="chapter" data-level="3.9.1" data-path="3-viz.html"><a href="3-viz.html#review-questions"><i class="fa fa-check"></i><b>3.9.1</b> Review questions</a></li>
<li class="chapter" data-level="3.9.2" data-path="3-viz.html"><a href="3-viz.html#whats-to-come-1"><i class="fa fa-check"></i><b>3.9.2</b> What’s to come?</a></li>
<li class="chapter" data-level="3.9.3" data-path="3-viz.html"><a href="3-viz.html#resources"><i class="fa fa-check"></i><b>3.9.3</b> Resources</a></li>
<li class="chapter" data-level="3.9.4" data-path="3-viz.html"><a href="3-viz.html#script-of-r-code"><i class="fa fa-check"></i><b>3.9.4</b> Script of R code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="4-tidy.html"><a href="4-tidy.html"><i class="fa fa-check"></i><b>4</b> Tidy Data via tidyr</a><ul>
<li class="chapter" data-level="" data-path="4-tidy.html"><a href="4-tidy.html#needed-packages-1"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="4.1" data-path="4-tidy.html"><a href="4-tidy.html#what-is-tidy-data"><i class="fa fa-check"></i><b>4.1</b> What is tidy data?</a></li>
<li class="chapter" data-level="4.2" data-path="4-tidy.html"><a href="4-tidy.html#importing-csvs-via-readr"><i class="fa fa-check"></i><b>4.2</b> Importing CSVs via readr</a></li>
<li class="chapter" data-level="4.3" data-path="4-tidy.html"><a href="4-tidy.html#tidying"><i class="fa fa-check"></i><b>4.3</b> Converting from wide to long</a></li>
<li class="chapter" data-level="4.4" data-path="4-tidy.html"><a href="4-tidy.html#back-to-nycflights"><i class="fa fa-check"></i><b>4.4</b> Back to nycflights</a><ul>
<li class="chapter" data-level="4.4.1" data-path="4-tidy.html"><a href="4-tidy.html#observational-units"><i class="fa fa-check"></i><b>4.4.1</b> Observational units</a></li>
<li class="chapter" data-level="4.4.2" data-path="4-tidy.html"><a href="4-tidy.html#identification-vs-measurement-variables"><i class="fa fa-check"></i><b>4.4.2</b> Identification vs measurement variables</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="4-tidy.html"><a href="4-tidy.html#optional-normal-forms-of-data"><i class="fa fa-check"></i><b>4.5</b> Optional: Normal forms of data</a></li>
<li class="chapter" data-level="4.6" data-path="4-tidy.html"><a href="4-tidy.html#conclusion-2"><i class="fa fa-check"></i><b>4.6</b> Conclusion</a><ul>
<li class="chapter" data-level="4.6.1" data-path="4-tidy.html"><a href="4-tidy.html#review-questions-1"><i class="fa fa-check"></i><b>4.6.1</b> Review questions</a></li>
<li class="chapter" data-level="4.6.2" data-path="4-tidy.html"><a href="4-tidy.html#whats-to-come-2"><i class="fa fa-check"></i><b>4.6.2</b> What’s to come?</a></li>
<li class="chapter" data-level="4.6.3" data-path="4-tidy.html"><a href="4-tidy.html#script-of-r-code-1"><i class="fa fa-check"></i><b>4.6.3</b> Script of R code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="5-wrangling.html"><a href="5-wrangling.html"><i class="fa fa-check"></i><b>5</b> Data Wrangling via dplyr</a><ul>
<li class="chapter" data-level="" data-path="5-wrangling.html"><a href="5-wrangling.html#needed-packages-2"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="5.1" data-path="5-wrangling.html"><a href="5-wrangling.html#piping"><i class="fa fa-check"></i><b>5.1</b> The pipe <code>%&gt;%</code></a></li>
<li class="chapter" data-level="5.2" data-path="5-wrangling.html"><a href="5-wrangling.html#five-main-verbs---the-5mv"><i class="fa fa-check"></i><b>5.2</b> Five Main Verbs - The 5MV</a></li>
<li class="chapter" data-level="5.3" data-path="5-wrangling.html"><a href="5-wrangling.html#filter"><i class="fa fa-check"></i><b>5.3</b> 5MV#1: Filter observations using filter</a></li>
<li class="chapter" data-level="5.4" data-path="5-wrangling.html"><a href="5-wrangling.html#mv2-summarize-variables-using-summarize"><i class="fa fa-check"></i><b>5.4</b> 5MV#2: Summarize variables using summarize</a></li>
<li class="chapter" data-level="5.5" data-path="5-wrangling.html"><a href="5-wrangling.html#groupby"><i class="fa fa-check"></i><b>5.5</b> 5MV#3: Group rows using group_by</a></li>
<li class="chapter" data-level="5.6" data-path="5-wrangling.html"><a href="5-wrangling.html#mv4-create-new-variableschange-old-variables-using-mutate"><i class="fa fa-check"></i><b>5.6</b> 5MV#4: Create new variables/change old variables using mutate</a></li>
<li class="chapter" data-level="5.7" data-path="5-wrangling.html"><a href="5-wrangling.html#arrange"><i class="fa fa-check"></i><b>5.7</b> 5MV#5: Reorder the data frame using arrange</a></li>
<li class="chapter" data-level="5.8" data-path="5-wrangling.html"><a href="5-wrangling.html#joins"><i class="fa fa-check"></i><b>5.8</b> Joining data frames</a><ul>
<li class="chapter" data-level="5.8.1" data-path="5-wrangling.html"><a href="5-wrangling.html#joining-by-key-variables"><i class="fa fa-check"></i><b>5.8.1</b> Joining by key variables</a></li>
<li class="chapter" data-level="5.8.2" data-path="5-wrangling.html"><a href="5-wrangling.html#joining-by-key-variables-with-different-names"><i class="fa fa-check"></i><b>5.8.2</b> Joining by key variables with different names</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="5-wrangling.html"><a href="5-wrangling.html#other-verbs"><i class="fa fa-check"></i><b>5.9</b> Optional: Other verbs</a><ul>
<li class="chapter" data-level="5.9.1" data-path="5-wrangling.html"><a href="5-wrangling.html#select"><i class="fa fa-check"></i><b>5.9.1</b> Select variables using select</a></li>
<li class="chapter" data-level="5.9.2" data-path="5-wrangling.html"><a href="5-wrangling.html#rename"><i class="fa fa-check"></i><b>5.9.2</b> Rename variables using rename</a></li>
<li class="chapter" data-level="5.9.3" data-path="5-wrangling.html"><a href="5-wrangling.html#find-the-top-number-of-values-using-top_n"><i class="fa fa-check"></i><b>5.9.3</b> Find the top number of values using top_n</a></li>
</ul></li>
<li class="chapter" data-level="5.10" data-path="5-wrangling.html"><a href="5-wrangling.html#conclusion-3"><i class="fa fa-check"></i><b>5.10</b> Conclusion</a><ul>
<li class="chapter" data-level="5.10.1" data-path="5-wrangling.html"><a href="5-wrangling.html#review-questions-2"><i class="fa fa-check"></i><b>5.10.1</b> Review questions</a></li>
<li class="chapter" data-level="5.10.2" data-path="5-wrangling.html"><a href="5-wrangling.html#whats-to-come-3"><i class="fa fa-check"></i><b>5.10.2</b> What’s to come?</a></li>
<li class="chapter" data-level="5.10.3" data-path="5-wrangling.html"><a href="5-wrangling.html#resources-1"><i class="fa fa-check"></i><b>5.10.3</b> Resources</a></li>
<li class="chapter" data-level="5.10.4" data-path="5-wrangling.html"><a href="5-wrangling.html#script-of-r-code-2"><i class="fa fa-check"></i><b>5.10.4</b> Script of R code</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Data Modeling via moderndive</b></span></li>
<li class="chapter" data-level="6" data-path="6-regression.html"><a href="6-regression.html"><i class="fa fa-check"></i><b>6</b> Basic Regression</a><ul>
<li class="chapter" data-level="" data-path="6-regression.html"><a href="6-regression.html#needed-packages-3"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="6.1" data-path="6-regression.html"><a href="6-regression.html#model1"><i class="fa fa-check"></i><b>6.1</b> One numerical x</a><ul>
<li class="chapter" data-level="6.1.1" data-path="6-regression.html"><a href="6-regression.html#model1EDA"><i class="fa fa-check"></i><b>6.1.1</b> Exploratory data analysis</a></li>
<li class="chapter" data-level="6.1.2" data-path="6-regression.html"><a href="6-regression.html#model1table"><i class="fa fa-check"></i><b>6.1.2</b> Simple linear regression</a></li>
<li class="chapter" data-level="6.1.3" data-path="6-regression.html"><a href="6-regression.html#model1points"><i class="fa fa-check"></i><b>6.1.3</b> Observed/fitted values and residuals</a></li>
<li class="chapter" data-level="6.1.4" data-path="6-regression.html"><a href="6-regression.html#model1residuals"><i class="fa fa-check"></i><b>6.1.4</b> Residual analysis</a></li>
<li class="chapter" data-level="6.1.5" data-path="6-regression.html"><a href="6-regression.html#your-turn"><i class="fa fa-check"></i><b>6.1.5</b> Your Turn</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="6-regression.html"><a href="6-regression.html#model2"><i class="fa fa-check"></i><b>6.2</b> One categorical x</a><ul>
<li class="chapter" data-level="6.2.1" data-path="6-regression.html"><a href="6-regression.html#model2EDA"><i class="fa fa-check"></i><b>6.2.1</b> Exploratory data analysis</a></li>
<li class="chapter" data-level="6.2.2" data-path="6-regression.html"><a href="6-regression.html#model2table"><i class="fa fa-check"></i><b>6.2.2</b> Linear regression</a></li>
<li class="chapter" data-level="6.2.3" data-path="6-regression.html"><a href="6-regression.html#model2points"><i class="fa fa-check"></i><b>6.2.3</b> Observed/fitted values and residuals</a></li>
<li class="chapter" data-level="6.2.4" data-path="6-regression.html"><a href="6-regression.html#model2residuals"><i class="fa fa-check"></i><b>6.2.4</b> Residual analysis</a></li>
<li class="chapter" data-level="6.2.5" data-path="6-regression.html"><a href="6-regression.html#your-turn-1"><i class="fa fa-check"></i><b>6.2.5</b> Your turn</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="6-regression.html"><a href="6-regression.html#other-topics"><i class="fa fa-check"></i><b>6.3</b> Other topics</a><ul>
<li class="chapter" data-level="6.3.1" data-path="6-regression.html"><a href="6-regression.html#correlationcoefficient"><i class="fa fa-check"></i><b>6.3.1</b> Correlation coefficient</a></li>
<li class="chapter" data-level="6.3.2" data-path="6-regression.html"><a href="6-regression.html#correlation-is-not-causation"><i class="fa fa-check"></i><b>6.3.2</b> Correlation is not necessarily causation</a></li>
<li class="chapter" data-level="6.3.3" data-path="6-regression.html"><a href="6-regression.html#leastsquares"><i class="fa fa-check"></i><b>6.3.3</b> Best fitting line</a></li>
<li class="chapter" data-level="6.3.4" data-path="6-regression.html"><a href="6-regression.html#underthehood"><i class="fa fa-check"></i><b>6.3.4</b> How does <code>get_regression_table()</code> work?</a></li>
<li class="chapter" data-level="6.3.5" data-path="6-regression.html"><a href="6-regression.html#script-of-r-code-3"><i class="fa fa-check"></i><b>6.3.5</b> Script of R code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html"><i class="fa fa-check"></i><b>7</b> Multiple Regression</a><ul>
<li class="chapter" data-level="" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#needed-packages-4"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="7.1" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model3"><i class="fa fa-check"></i><b>7.1</b> Two numerical x</a><ul>
<li class="chapter" data-level="7.1.1" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model3EDA"><i class="fa fa-check"></i><b>7.1.1</b> Exploratory data analysis</a></li>
<li class="chapter" data-level="7.1.2" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model3table"><i class="fa fa-check"></i><b>7.1.2</b> Multiple regression</a></li>
<li class="chapter" data-level="7.1.3" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model3points"><i class="fa fa-check"></i><b>7.1.3</b> Observed/fitted values and residuals</a></li>
<li class="chapter" data-level="7.1.4" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model3residuals"><i class="fa fa-check"></i><b>7.1.4</b> Residual analysis</a></li>
<li class="chapter" data-level="7.1.5" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#your-turn-2"><i class="fa fa-check"></i><b>7.1.5</b> Your turn</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model4"><i class="fa fa-check"></i><b>7.2</b> One numerical &amp; one categorical x</a><ul>
<li class="chapter" data-level="7.2.1" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model4EDA"><i class="fa fa-check"></i><b>7.2.1</b> Exploratory data analysis</a></li>
<li class="chapter" data-level="7.2.2" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model4table"><i class="fa fa-check"></i><b>7.2.2</b> Multiple regression</a></li>
<li class="chapter" data-level="7.2.3" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#mutiple-regression-with-interaction-effects"><i class="fa fa-check"></i><b>7.2.3</b> Mutiple regression with interaction effects</a></li>
<li class="chapter" data-level="7.2.4" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model4points"><i class="fa fa-check"></i><b>7.2.4</b> Observed/fitted values and residuals</a></li>
<li class="chapter" data-level="7.2.5" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model4residuals"><i class="fa fa-check"></i><b>7.2.5</b> Residual analysis</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#other-topics-1"><i class="fa fa-check"></i><b>7.3</b> Other topics</a><ul>
<li class="chapter" data-level="7.3.1" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#simpsonsparadox"><i class="fa fa-check"></i><b>7.3.1</b> Simpson’s Paradox</a></li>
<li class="chapter" data-level="7.3.2" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#script-of-r-code-4"><i class="fa fa-check"></i><b>7.3.2</b> Script of R code</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Statistical Inference via infer</b></span></li>
<li class="chapter" data-level="8" data-path="8-sampling.html"><a href="8-sampling.html"><i class="fa fa-check"></i><b>8</b> Sampling</a><ul>
<li class="chapter" data-level="" data-path="8-sampling.html"><a href="8-sampling.html#needed-packages-5"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="8.1" data-path="8-sampling.html"><a href="8-sampling.html#random-sampling"><i class="fa fa-check"></i><b>8.1</b> Random sampling</a><ul>
<li class="chapter" data-level="8.1.1" data-path="8-sampling.html"><a href="8-sampling.html#sampling"><i class="fa fa-check"></i><b>8.1.1</b> Sampling</a></li>
<li class="chapter" data-level="8.1.2" data-path="8-sampling.html"><a href="8-sampling.html#tasting-soup"><i class="fa fa-check"></i><b>8.1.2</b> Tasting soup</a></li>
<li class="chapter" data-level="8.1.3" data-path="8-sampling.html"><a href="8-sampling.html#common-terms"><i class="fa fa-check"></i><b>8.1.3</b> Common terms</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="8-sampling.html"><a href="8-sampling.html#visualizing-sampling"><i class="fa fa-check"></i><b>8.2</b> Visualizing sampling</a></li>
<li class="chapter" data-level="8.3" data-path="8-sampling.html"><a href="8-sampling.html#vizsamp"><i class="fa fa-check"></i><b>8.3</b> Visualizing sampling</a><ul>
<li class="chapter" data-level="8.3.1" data-path="8-sampling.html"><a href="8-sampling.html#sampling-distribution"><i class="fa fa-check"></i><b>8.3.1</b> Sampling distribution</a></li>
<li class="chapter" data-level="8.3.2" data-path="8-sampling.html"><a href="8-sampling.html#repeated-sampling-via-do"><i class="fa fa-check"></i><b>8.3.2</b> Repeated sampling via <code>do</code></a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="8-sampling.html"><a href="8-sampling.html#simulation"><i class="fa fa-check"></i><b>8.4</b> Simulation</a></li>
<li class="chapter" data-level="8.5" data-path="8-sampling.html"><a href="8-sampling.html#review-of-mosaic-simulation-functions"><i class="fa fa-check"></i><b>8.5</b> Review of <code>mosaic</code> simulation functions</a></li>
<li class="chapter" data-level="8.6" data-path="8-sampling.html"><a href="8-sampling.html#conclusion-4"><i class="fa fa-check"></i><b>8.6</b> Conclusion</a><ul>
<li class="chapter" data-level="8.6.1" data-path="8-sampling.html"><a href="8-sampling.html#whats-to-come-4"><i class="fa fa-check"></i><b>8.6.1</b> What’s to come?</a></li>
<li class="chapter" data-level="8.6.2" data-path="8-sampling.html"><a href="8-sampling.html#script-of-r-code-5"><i class="fa fa-check"></i><b>8.6.2</b> Script of R code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="9-ci.html"><a href="9-ci.html"><i class="fa fa-check"></i><b>9</b> Confidence Intervals</a><ul>
<li class="chapter" data-level="" data-path="9-ci.html"><a href="9-ci.html#needed-packages-6"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="9.1" data-path="9-ci.html"><a href="9-ci.html#bootstrapping"><i class="fa fa-check"></i><b>9.1</b> Bootstrapping</a><ul>
<li class="chapter" data-level="9.1.1" data-path="9-ci.html"><a href="9-ci.html#review-of-bootstrapping"><i class="fa fa-check"></i><b>9.1.1</b> Review of bootstrapping</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="9-ci.html"><a href="9-ci.html#relation-to-hypothesis-testing"><i class="fa fa-check"></i><b>9.2</b> Relation to hypothesis testing</a></li>
<li class="chapter" data-level="9.3" data-path="9-ci.html"><a href="9-ci.html#effect-size"><i class="fa fa-check"></i><b>9.3</b> Effect size</a></li>
<li class="chapter" data-level="9.4" data-path="9-ci.html"><a href="9-ci.html#conclusion-5"><i class="fa fa-check"></i><b>9.4</b> Conclusion</a><ul>
<li class="chapter" data-level="9.4.1" data-path="9-ci.html"><a href="9-ci.html#whats-to-come-5"><i class="fa fa-check"></i><b>9.4.1</b> What’s to come?</a></li>
<li class="chapter" data-level="9.4.2" data-path="9-ci.html"><a href="9-ci.html#script-of-r-code-6"><i class="fa fa-check"></i><b>9.4.2</b> Script of R code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="10-hypo.html"><a href="10-hypo.html"><i class="fa fa-check"></i><b>10</b> Hypothesis Testing</a><ul>
<li class="chapter" data-level="" data-path="10-hypo.html"><a href="10-hypo.html#needed-packages-7"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="10.1" data-path="10-hypo.html"><a href="10-hypo.html#when-inference-is-not-needed"><i class="fa fa-check"></i><b>10.1</b> When inference is not needed</a></li>
<li class="chapter" data-level="10.2" data-path="10-hypo.html"><a href="10-hypo.html#basics-of-hypothesis-testing"><i class="fa fa-check"></i><b>10.2</b> Basics of hypothesis testing</a></li>
<li class="chapter" data-level="10.3" data-path="10-hypo.html"><a href="10-hypo.html#trial"><i class="fa fa-check"></i><b>10.3</b> Criminal trial analogy</a><ul>
<li class="chapter" data-level="10.3.1" data-path="10-hypo.html"><a href="10-hypo.html#two-possible-conclusions"><i class="fa fa-check"></i><b>10.3.1</b> Two possible conclusions</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="10-hypo.html"><a href="10-hypo.html#types-of-errors-in-hypothesis-testing"><i class="fa fa-check"></i><b>10.4</b> Types of errors in hypothesis testing</a><ul>
<li class="chapter" data-level="10.4.1" data-path="10-hypo.html"><a href="10-hypo.html#logic-of-hypothesis-testing"><i class="fa fa-check"></i><b>10.4.1</b> Logic of hypothesis testing</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="10-hypo.html"><a href="10-hypo.html#statistical-significance"><i class="fa fa-check"></i><b>10.5</b> Statistical significance</a></li>
<li class="chapter" data-level="10.6" data-path="10-hypo.html"><a href="10-hypo.html#example-revisiting-the-lady-tasting-tea"><i class="fa fa-check"></i><b>10.6</b> Example: Revisiting the Lady Tasting Tea</a><ul>
<li class="chapter" data-level="10.6.1" data-path="10-hypo.html"><a href="10-hypo.html#data"><i class="fa fa-check"></i><b>10.6.1</b> Data</a></li>
<li class="chapter" data-level="10.6.2" data-path="10-hypo.html"><a href="10-hypo.html#test-statistic-delta"><i class="fa fa-check"></i><b>10.6.2</b> Test statistic <span class="math inline">\(\delta\)</span></a></li>
<li class="chapter" data-level="10.6.3" data-path="10-hypo.html"><a href="10-hypo.html#observed-effect-delta"><i class="fa fa-check"></i><b>10.6.3</b> Observed effect <span class="math inline">\(\delta^*\)</span></a></li>
<li class="chapter" data-level="10.6.4" data-path="10-hypo.html"><a href="10-hypo.html#model-of-h_0"><i class="fa fa-check"></i><b>10.6.4</b> Model of <span class="math inline">\(H_0\)</span></a></li>
<li class="chapter" data-level="10.6.5" data-path="10-hypo.html"><a href="10-hypo.html#simulated-data"><i class="fa fa-check"></i><b>10.6.5</b> Simulated data</a></li>
<li class="chapter" data-level="10.6.6" data-path="10-hypo.html"><a href="10-hypo.html#distribution-of-delta-under-h_0"><i class="fa fa-check"></i><b>10.6.6</b> Distribution of <span class="math inline">\(\delta\)</span> under <span class="math inline">\(H_0\)</span></a></li>
<li class="chapter" data-level="10.6.7" data-path="10-hypo.html"><a href="10-hypo.html#the-p-value"><i class="fa fa-check"></i><b>10.6.7</b> The p-value</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="10-hypo.html"><a href="10-hypo.html#example-comparing-two-means"><i class="fa fa-check"></i><b>10.7</b> Example: Comparing two means</a><ul>
<li class="chapter" data-level="10.7.1" data-path="10-hypo.html"><a href="10-hypo.html#randomizationpermutation"><i class="fa fa-check"></i><b>10.7.1</b> Randomization/permutation</a></li>
<li class="chapter" data-level="10.7.2" data-path="10-hypo.html"><a href="10-hypo.html#comparing-action-and-romance-movies"><i class="fa fa-check"></i><b>10.7.2</b> Comparing action and romance movies</a></li>
<li class="chapter" data-level="10.7.3" data-path="10-hypo.html"><a href="10-hypo.html#sampling-rightarrow-randomization"><i class="fa fa-check"></i><b>10.7.3</b> Sampling <span class="math inline">\(\rightarrow\)</span> randomization</a></li>
<li class="chapter" data-level="10.7.4" data-path="10-hypo.html"><a href="10-hypo.html#data-1"><i class="fa fa-check"></i><b>10.7.4</b> Data</a></li>
<li class="chapter" data-level="10.7.5" data-path="10-hypo.html"><a href="10-hypo.html#model-of-h_0-1"><i class="fa fa-check"></i><b>10.7.5</b> Model of <span class="math inline">\(H_0\)</span></a></li>
<li class="chapter" data-level="10.7.6" data-path="10-hypo.html"><a href="10-hypo.html#test-statistic-delta-1"><i class="fa fa-check"></i><b>10.7.6</b> Test statistic <span class="math inline">\(\delta\)</span></a></li>
<li class="chapter" data-level="10.7.7" data-path="10-hypo.html"><a href="10-hypo.html#observed-effect-delta-1"><i class="fa fa-check"></i><b>10.7.7</b> Observed effect <span class="math inline">\(\delta^*\)</span></a></li>
<li class="chapter" data-level="10.7.8" data-path="10-hypo.html"><a href="10-hypo.html#simulated-data-1"><i class="fa fa-check"></i><b>10.7.8</b> Simulated data</a></li>
<li class="chapter" data-level="10.7.9" data-path="10-hypo.html"><a href="10-hypo.html#distribution-of-delta-under-h_0-1"><i class="fa fa-check"></i><b>10.7.9</b> Distribution of <span class="math inline">\(\delta\)</span> under <span class="math inline">\(H_0\)</span></a></li>
<li class="chapter" data-level="10.7.10" data-path="10-hypo.html"><a href="10-hypo.html#the-p-value-1"><i class="fa fa-check"></i><b>10.7.10</b> The p-value</a></li>
<li class="chapter" data-level="10.7.11" data-path="10-hypo.html"><a href="10-hypo.html#summary-5"><i class="fa fa-check"></i><b>10.7.11</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="10.8" data-path="10-hypo.html"><a href="10-hypo.html#theory-hypo"><i class="fa fa-check"></i><b>10.8</b> Building theory-based methods using computation</a><ul>
<li class="chapter" data-level="10.8.1" data-path="10-hypo.html"><a href="10-hypo.html#example-t-test-for-two-independent-samples"><i class="fa fa-check"></i><b>10.8.1</b> Example: <span class="math inline">\(t\)</span>-test for two independent samples</a></li>
<li class="chapter" data-level="10.8.2" data-path="10-hypo.html"><a href="10-hypo.html#conditions-for-t-test"><i class="fa fa-check"></i><b>10.8.2</b> Conditions for t-test</a></li>
</ul></li>
<li class="chapter" data-level="10.9" data-path="10-hypo.html"><a href="10-hypo.html#resampling-based-inference-for-regression"><i class="fa fa-check"></i><b>10.9</b> Resampling-based inference for regression</a><ul>
<li class="chapter" data-level="10.9.1" data-path="10-hypo.html"><a href="10-hypo.html#data-2"><i class="fa fa-check"></i><b>10.9.1</b> Data</a></li>
<li class="chapter" data-level="10.9.2" data-path="10-hypo.html"><a href="10-hypo.html#test-statistic-delta-2"><i class="fa fa-check"></i><b>10.9.2</b> Test statistic <span class="math inline">\(\delta\)</span></a></li>
<li class="chapter" data-level="10.9.3" data-path="10-hypo.html"><a href="10-hypo.html#observed-effect-delta-2"><i class="fa fa-check"></i><b>10.9.3</b> Observed effect <span class="math inline">\(\delta^*\)</span></a></li>
<li class="chapter" data-level="10.9.4" data-path="10-hypo.html"><a href="10-hypo.html#model-of-h_0-2"><i class="fa fa-check"></i><b>10.9.4</b> Model of <span class="math inline">\(H_0\)</span></a></li>
<li class="chapter" data-level="10.9.5" data-path="10-hypo.html"><a href="10-hypo.html#simulated-data-2"><i class="fa fa-check"></i><b>10.9.5</b> Simulated data</a></li>
<li class="chapter" data-level="10.9.6" data-path="10-hypo.html"><a href="10-hypo.html#distribution-of-delta-under-h_0-2"><i class="fa fa-check"></i><b>10.9.6</b> Distribution of <span class="math inline">\(\delta\)</span> under <span class="math inline">\(H_0\)</span></a></li>
<li class="chapter" data-level="10.9.7" data-path="10-hypo.html"><a href="10-hypo.html#the-p-value-2"><i class="fa fa-check"></i><b>10.9.7</b> The p-value</a></li>
</ul></li>
<li class="chapter" data-level="10.10" data-path="10-hypo.html"><a href="10-hypo.html#theoryreg"><i class="fa fa-check"></i><b>10.10</b> Theory-based inference for regression</a><ul>
<li class="chapter" data-level="10.10.1" data-path="10-hypo.html"><a href="10-hypo.html#conditions-for-regression"><i class="fa fa-check"></i><b>10.10.1</b> Conditions for regression</a></li>
<li class="chapter" data-level="10.10.2" data-path="10-hypo.html"><a href="10-hypo.html#resid"><i class="fa fa-check"></i><b>10.10.2</b> Residual analysis</a></li>
</ul></li>
<li class="chapter" data-level="10.11" data-path="10-hypo.html"><a href="10-hypo.html#conclusion-6"><i class="fa fa-check"></i><b>10.11</b> Conclusion</a><ul>
<li class="chapter" data-level="10.11.1" data-path="10-hypo.html"><a href="10-hypo.html#whats-to-come-6"><i class="fa fa-check"></i><b>10.11.1</b> What’s to come?</a></li>
<li class="chapter" data-level="10.11.2" data-path="10-hypo.html"><a href="10-hypo.html#script-of-r-code-7"><i class="fa fa-check"></i><b>10.11.2</b> Script of R code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html"><i class="fa fa-check"></i><b>11</b> Inference for Regression</a><ul>
<li class="chapter" data-level="11.1" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#refresher-professor-evaluations-data"><i class="fa fa-check"></i><b>11.1</b> Refresher: Professor evaluations data</a><ul>
<li class="chapter" data-level="11.1.1" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#refresher-visualizations"><i class="fa fa-check"></i><b>11.1.1</b> Refresher: Visualizations</a></li>
<li class="chapter" data-level="11.1.2" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#refresher-regression-tables"><i class="fa fa-check"></i><b>11.1.2</b> Refresher: Regression tables</a></li>
<li class="chapter" data-level="11.1.3" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#refresher-residual-analysis"><i class="fa fa-check"></i><b>11.1.3</b> Refresher: Residual analysis</a></li>
<li class="chapter" data-level="11.1.4" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#script-of-r-code-8"><i class="fa fa-check"></i><b>11.1.4</b> Script of R code</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Conclusion</b></span></li>
<li class="chapter" data-level="12" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html"><i class="fa fa-check"></i><b>12</b> Thinking with Data</a><ul>
<li class="chapter" data-level="12.1" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html#effective-data-storytelling"><i class="fa fa-check"></i><b>12.1</b> Effective Data Storytelling</a></li>
<li class="chapter" data-level="" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html#concluding-remarks"><i class="fa fa-check"></i>Concluding remarks</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="A-appendixA.html"><a href="A-appendixA.html"><i class="fa fa-check"></i><b>A</b> Statistical Background</a><ul>
<li class="chapter" data-level="A.1" data-path="A-appendixA.html"><a href="A-appendixA.html#basic-statistical-terms"><i class="fa fa-check"></i><b>A.1</b> Basic statistical terms</a><ul>
<li class="chapter" data-level="A.1.1" data-path="A-appendixA.html"><a href="A-appendixA.html#mean"><i class="fa fa-check"></i><b>A.1.1</b> Mean</a></li>
<li class="chapter" data-level="A.1.2" data-path="A-appendixA.html"><a href="A-appendixA.html#median"><i class="fa fa-check"></i><b>A.1.2</b> Median</a></li>
<li class="chapter" data-level="A.1.3" data-path="A-appendixA.html"><a href="A-appendixA.html#standard-deviation"><i class="fa fa-check"></i><b>A.1.3</b> Standard deviation</a></li>
<li class="chapter" data-level="A.1.4" data-path="A-appendixA.html"><a href="A-appendixA.html#five-number-summary"><i class="fa fa-check"></i><b>A.1.4</b> Five-number summary</a></li>
<li class="chapter" data-level="A.1.5" data-path="A-appendixA.html"><a href="A-appendixA.html#distribution"><i class="fa fa-check"></i><b>A.1.5</b> Distribution</a></li>
<li class="chapter" data-level="A.1.6" data-path="A-appendixA.html"><a href="A-appendixA.html#outliers"><i class="fa fa-check"></i><b>A.1.6</b> Outliers</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="B" data-path="B-appendixB.html"><a href="B-appendixB.html"><i class="fa fa-check"></i><b>B</b> Inference Examples</a><ul>
<li class="chapter" data-level="" data-path="B-appendixB.html"><a href="B-appendixB.html#needed-packages-8"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="B.1" data-path="B-appendixB.html"><a href="B-appendixB.html#inference-mind-map"><i class="fa fa-check"></i><b>B.1</b> Inference mind map</a></li>
<li class="chapter" data-level="B.2" data-path="B-appendixB.html"><a href="B-appendixB.html#one-mean"><i class="fa fa-check"></i><b>B.2</b> One mean</a><ul>
<li class="chapter" data-level="B.2.1" data-path="B-appendixB.html"><a href="B-appendixB.html#problem-statement"><i class="fa fa-check"></i><b>B.2.1</b> Problem statement</a></li>
<li class="chapter" data-level="B.2.2" data-path="B-appendixB.html"><a href="B-appendixB.html#competing-hypotheses"><i class="fa fa-check"></i><b>B.2.2</b> Competing hypotheses</a></li>
<li class="chapter" data-level="B.2.3" data-path="B-appendixB.html"><a href="B-appendixB.html#exploring-the-sample-data"><i class="fa fa-check"></i><b>B.2.3</b> Exploring the sample data</a></li>
<li class="chapter" data-level="B.2.4" data-path="B-appendixB.html"><a href="B-appendixB.html#non-traditional-methods"><i class="fa fa-check"></i><b>B.2.4</b> Non-traditional methods</a></li>
<li class="chapter" data-level="B.2.5" data-path="B-appendixB.html"><a href="B-appendixB.html#traditional-methods"><i class="fa fa-check"></i><b>B.2.5</b> Traditional methods</a></li>
<li class="chapter" data-level="B.2.6" data-path="B-appendixB.html"><a href="B-appendixB.html#comparing-results"><i class="fa fa-check"></i><b>B.2.6</b> Comparing results</a></li>
</ul></li>
<li class="chapter" data-level="B.3" data-path="B-appendixB.html"><a href="B-appendixB.html#one-proportion"><i class="fa fa-check"></i><b>B.3</b> One proportion</a><ul>
<li class="chapter" data-level="B.3.1" data-path="B-appendixB.html"><a href="B-appendixB.html#problem-statement-1"><i class="fa fa-check"></i><b>B.3.1</b> Problem statement</a></li>
<li class="chapter" data-level="B.3.2" data-path="B-appendixB.html"><a href="B-appendixB.html#competing-hypotheses-1"><i class="fa fa-check"></i><b>B.3.2</b> Competing hypotheses</a></li>
<li class="chapter" data-level="B.3.3" data-path="B-appendixB.html"><a href="B-appendixB.html#exploring-the-sample-data-1"><i class="fa fa-check"></i><b>B.3.3</b> Exploring the sample data</a></li>
<li class="chapter" data-level="B.3.4" data-path="B-appendixB.html"><a href="B-appendixB.html#non-traditional-methods-1"><i class="fa fa-check"></i><b>B.3.4</b> Non-traditional methods</a></li>
<li class="chapter" data-level="B.3.5" data-path="B-appendixB.html"><a href="B-appendixB.html#traditional-methods-1"><i class="fa fa-check"></i><b>B.3.5</b> Traditional methods</a></li>
<li class="chapter" data-level="B.3.6" data-path="B-appendixB.html"><a href="B-appendixB.html#comparing-results-1"><i class="fa fa-check"></i><b>B.3.6</b> Comparing results</a></li>
</ul></li>
<li class="chapter" data-level="B.4" data-path="B-appendixB.html"><a href="B-appendixB.html#two-proportions"><i class="fa fa-check"></i><b>B.4</b> Two proportions</a><ul>
<li class="chapter" data-level="B.4.1" data-path="B-appendixB.html"><a href="B-appendixB.html#problem-statement-2"><i class="fa fa-check"></i><b>B.4.1</b> Problem statement</a></li>
<li class="chapter" data-level="B.4.2" data-path="B-appendixB.html"><a href="B-appendixB.html#competing-hypotheses-2"><i class="fa fa-check"></i><b>B.4.2</b> Competing hypotheses</a></li>
<li class="chapter" data-level="B.4.3" data-path="B-appendixB.html"><a href="B-appendixB.html#exploring-the-sample-data-2"><i class="fa fa-check"></i><b>B.4.3</b> Exploring the sample data</a></li>
<li class="chapter" data-level="B.4.4" data-path="B-appendixB.html"><a href="B-appendixB.html#non-traditional-methods-2"><i class="fa fa-check"></i><b>B.4.4</b> Non-traditional methods</a></li>
<li class="chapter" data-level="B.4.5" data-path="B-appendixB.html"><a href="B-appendixB.html#traditional-methods-2"><i class="fa fa-check"></i><b>B.4.5</b> Traditional methods</a></li>
<li class="chapter" data-level="B.4.6" data-path="B-appendixB.html"><a href="B-appendixB.html#check-conditions-2"><i class="fa fa-check"></i><b>B.4.6</b> Check conditions</a></li>
<li class="chapter" data-level="B.4.7" data-path="B-appendixB.html"><a href="B-appendixB.html#test-statistic-2"><i class="fa fa-check"></i><b>B.4.7</b> Test statistic</a></li>
<li class="chapter" data-level="B.4.8" data-path="B-appendixB.html"><a href="B-appendixB.html#state-conclusion-2"><i class="fa fa-check"></i><b>B.4.8</b> State conclusion</a></li>
<li class="chapter" data-level="B.4.9" data-path="B-appendixB.html"><a href="B-appendixB.html#comparing-results-2"><i class="fa fa-check"></i><b>B.4.9</b> Comparing results</a></li>
</ul></li>
<li class="chapter" data-level="B.5" data-path="B-appendixB.html"><a href="B-appendixB.html#two-means-independent-samples"><i class="fa fa-check"></i><b>B.5</b> Two means (independent samples)</a><ul>
<li class="chapter" data-level="B.5.1" data-path="B-appendixB.html"><a href="B-appendixB.html#problem-statement-3"><i class="fa fa-check"></i><b>B.5.1</b> Problem statement</a></li>
<li class="chapter" data-level="B.5.2" data-path="B-appendixB.html"><a href="B-appendixB.html#competing-hypotheses-3"><i class="fa fa-check"></i><b>B.5.2</b> Competing hypotheses</a></li>
<li class="chapter" data-level="B.5.3" data-path="B-appendixB.html"><a href="B-appendixB.html#exploring-the-sample-data-3"><i class="fa fa-check"></i><b>B.5.3</b> Exploring the sample data</a></li>
<li class="chapter" data-level="B.5.4" data-path="B-appendixB.html"><a href="B-appendixB.html#non-traditional-methods-3"><i class="fa fa-check"></i><b>B.5.4</b> Non-traditional methods</a></li>
<li class="chapter" data-level="B.5.5" data-path="B-appendixB.html"><a href="B-appendixB.html#traditional-methods-3"><i class="fa fa-check"></i><b>B.5.5</b> Traditional methods</a></li>
<li class="chapter" data-level="B.5.6" data-path="B-appendixB.html"><a href="B-appendixB.html#test-statistic-3"><i class="fa fa-check"></i><b>B.5.6</b> Test statistic</a></li>
<li class="chapter" data-level="B.5.7" data-path="B-appendixB.html"><a href="B-appendixB.html#compute-p-value-2"><i class="fa fa-check"></i><b>B.5.7</b> Compute <span class="math inline">\(p\)</span>-value</a></li>
<li class="chapter" data-level="B.5.8" data-path="B-appendixB.html"><a href="B-appendixB.html#state-conclusion-3"><i class="fa fa-check"></i><b>B.5.8</b> State conclusion</a></li>
<li class="chapter" data-level="B.5.9" data-path="B-appendixB.html"><a href="B-appendixB.html#comparing-results-3"><i class="fa fa-check"></i><b>B.5.9</b> Comparing results</a></li>
</ul></li>
<li class="chapter" data-level="B.6" data-path="B-appendixB.html"><a href="B-appendixB.html#two-means-paired-samples"><i class="fa fa-check"></i><b>B.6</b> Two means (paired samples)</a><ul>
<li class="chapter" data-level="B.6.1" data-path="B-appendixB.html"><a href="B-appendixB.html#competing-hypotheses-4"><i class="fa fa-check"></i><b>B.6.1</b> Competing hypotheses</a></li>
<li class="chapter" data-level="B.6.2" data-path="B-appendixB.html"><a href="B-appendixB.html#exploring-the-sample-data-4"><i class="fa fa-check"></i><b>B.6.2</b> Exploring the sample data</a></li>
<li class="chapter" data-level="B.6.3" data-path="B-appendixB.html"><a href="B-appendixB.html#non-traditional-methods-4"><i class="fa fa-check"></i><b>B.6.3</b> Non-traditional methods</a></li>
<li class="chapter" data-level="B.6.4" data-path="B-appendixB.html"><a href="B-appendixB.html#traditional-methods-4"><i class="fa fa-check"></i><b>B.6.4</b> Traditional methods</a></li>
<li class="chapter" data-level="B.6.5" data-path="B-appendixB.html"><a href="B-appendixB.html#comparing-results-4"><i class="fa fa-check"></i><b>B.6.5</b> Comparing results</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="C" data-path="C-appendixC.html"><a href="C-appendixC.html"><i class="fa fa-check"></i><b>C</b> Reach for the Stars</a><ul>
<li class="chapter" data-level="" data-path="C-appendixC.html"><a href="C-appendixC.html#needed-packages-9"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="C.1" data-path="C-appendixC.html"><a href="C-appendixC.html#sorted-barplots"><i class="fa fa-check"></i><b>C.1</b> Sorted barplots</a></li>
<li class="chapter" data-level="C.2" data-path="C-appendixC.html"><a href="C-appendixC.html#interactive-graphics"><i class="fa fa-check"></i><b>C.2</b> Interactive graphics</a><ul>
<li class="chapter" data-level="C.2.1" data-path="C-appendixC.html"><a href="C-appendixC.html#interactive-linegraphs"><i class="fa fa-check"></i><b>C.2.1</b> Interactive linegraphs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">An Introduction to Statistical and Data Sciences via R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<html>
<img src='http://moderndive.com/images/logos/wide_format.png' alt="ModernDive">
</html>
<div id="regression" class="section level1">
<h1><span class="header-section-number">6</span> Basic Regression</h1>
<p>Now that we are equipped with data visualization skills from Chapter <a href="3-viz.html#viz">3</a>, data wrangling skills from Chapter <a href="5-wrangling.html#wrangling">5</a>, and an understanding of the “tidy” data format from Chapter <a href="4-tidy.html#tidy">4</a>, we now proceed with data modeling. The fundamental premise of data modeling is <em>to model the relationship</em> between:</p>
<ul>
<li>An outcome variable <span class="math inline">\(y\)</span>, also called a dependent variable and</li>
<li>An explanatory/predictor variable <span class="math inline">\(x\)</span>, also called an independent variable or covariate.</li>
</ul>
<p>Another way to state this is using mathematical terminology: we will model the outcome variable <span class="math inline">\(y\)</span> <em>as a function</em> of the explanatory/predictor variable <span class="math inline">\(x\)</span>. Why do we have two different labels, explanatory and predictor, for the variable <span class="math inline">\(x\)</span>? That’s because roughly speaking data modeling can be used for two purposes:</p>
<ol style="list-style-type: decimal">
<li><strong>Modeling for prediction</strong>: You want to predict an outcome variable <span class="math inline">\(y\)</span> based on the information contained in a set of predictor variables. You don’t care so much about understanding how all the variables relate and interact, but so long as you can make good predictions about <span class="math inline">\(y\)</span>, you’re fine. For example, if we know many individuals’ risk factors for lung cancer, such as smoking habits and age, can we predict whether or not they will develop lung cancer? Here we wouldn’t care so much about distinguishing the degree to which the different risk factors contribute to lung cancer, but instead only on whether or not they could be put together to make reliable predictions.</li>
<li><strong>Modeling for explanation</strong>: You want to explicitly describe the relationship between an outcome variable <span class="math inline">\(y\)</span> and a set of explanatory variables, determine the significance of any found relationships, and have measures summarizing these. Continuing our example from above, we would now be interested in describing the individual effects of the different risk factors and quantifying the magnitude of these effects. One reason could be to design an intervention to reduce lung cancer cases in a population, such as targeting smokers of a specific age group with advertisement for smoking cessation programs. In this book, we’ll focus more on this latter purpose.</li>
</ol>
<p>Data modeling is used in a wide variety of fields, including statistical inference, causal inference, artificial intelligence, and machine learning. There are many techniques for data modeling, such as tree-based models, neural networks/deep learning, and more. However, we’ll focus on one particular technique: <em>linear regression</em>, one of the most commonly-used and easy to understand approaches to modeling. Recall our discussion in Chapter <a href="2-getting-started.html#explore-dataframes">2.4.3</a> on numerical and categorical variables. Linear regression involves:</p>
<ul>
<li>An outcome variable <span class="math inline">\(y\)</span> that is <em>numerical</em></li>
<li>Explanatory variables <span class="math inline">\(\vec{x}\)</span> that are either <em>numerical</em> or <em>categorical</em></li>
</ul>
<p>Whereas there is always only one numerical outcome variable <span class="math inline">\(y\)</span>, we have choices on both the number and the type of explanatory variables <span class="math inline">\(\vec{x}\)</span> to use. We’re going to cover the following regression scenarios:</p>
<ul>
<li>In this chapter, Chapter <a href="6-regression.html#regression">6</a> on basic regression, where we’ll always have only one explanatory variable:
<ul>
<li>A single numerical explanatory variable <span class="math inline">\(x\)</span> in Section @(model1). This scenario is known as <em>simple linear regression</em>.</li>
<li>A single categorical explanatory variable <span class="math inline">\(x\)</span> in Section @(model2).</li>
</ul></li>
<li>In the next chapter: Chapter <a href="7-multiple-regression.html#multiple-regression">7</a> on <em>multiple regression</em>, where we’ll have more than one explanatory variable:
<ul>
<li>Two numerical explanatory variables <span class="math inline">\(x_1\)</span> and <span class="math inline">\(x_2\)</span> in Section @(model3).</li>
<li>One numerical and one categorical explanatory variable in Section @(model3). We’ll also introduce <em>interaction models</em> here, there the effect of one explanatory variable depends on the value of another.</li>
</ul></li>
</ul>
<p>We’ll study all 4 of these regression scenarios using real data, all easily accessible via R packages! <!--We will also discuss the concept of *correlation* and how it is frequently incorrectly used to imply *causation*.--></p>
<div id="needed-packages-3" class="section level3 unnumbered">
<h3>Needed packages</h3>
<p>In this chapter we introduce a new package, <code>moderndive</code>, that is an accompaniment package to the ModernDive book that includes useful functions for linear regression and other functions and data used in later in the book.</p>
<!--
However because this is a relatively new package, we're have to install this package in a different way than was covered in Section \@ref(packages). 

First, install the `remotes` package like you would normally install a package, then run the following line to install the `moderndive` package:
-->
<p>Let’s now load all the packages needed for this chapter. If needed, read Section <a href="2-getting-started.html#packages">2.3</a> for information on how to install and load R packages.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(moderndive)</code></pre></div>
</div>
<div id="model1" class="section level2">
<h2><span class="header-section-number">6.1</span> One numerical x</h2>
<p>Why do some professors and instructors at universities and colleges get high teaching evaluations from students while others don’t? What factors can explain these differences? Are there biases? These are questions that are of interest to univerisity/college administrators, as teaching evaluations are among the many criteria considered in determining which professors and instructors should get promotions. Researchers at the University of Texas in Austin tried to answer this question: what factors can explain differences in instructor’s teaching evaluation scores? To this end, they collected information on n = 463 instructors. A full description of the study can be found at <a href="https://www.openintro.org/stat/data/?data=evals">openintro.org</a>.</p>
<p>We’ll keep things simple for now and try to explain differences in instructor evaluations scores as a function of one numerical variable: their “beauty score” which we’ll describe shortly. Could it be that instructors with higher beauty scores also have higher teaching evaluations? Could it be instead that instructors with higher beauty scores tend to have lower teaching evaluations? Or could it be there is no relationship between beauty score and teaching evaluations?</p>
<p>We’ll achieve this by modeling the relationship between these two variables with a particular kind of linear regression called <em>simple linear regression</em>. Simple linear regression is the most basic form of linear regression where we have</p>
<ol style="list-style-type: decimal">
<li>A numerical outcome variable <span class="math inline">\(y\)</span>. In this case their teaching score.</li>
<li>A single numerical explanatory variable <span class="math inline">\(x\)</span>. In this case their beauty score.</li>
</ol>
<div id="model1EDA" class="section level3">
<h3><span class="header-section-number">6.1.1</span> Exploratory data analysis</h3>
<p>A crucial step before doing any kind of modeling or analysis however is performing an <em>exploratory data analysis</em>, or EDA, of all our data. Exploratory data analysis can give you a sense of the distribution of data, whether there are outliers and/or missing values, but most importantly it can inform how to build your model. There are many approaches to exploratory data analysis, here are three:</p>
<ol style="list-style-type: decimal">
<li>Most fundamentally: just looking at the raw values, in a spreadsheet for example. While this may seem trivial, many people ignore this crucial step!</li>
<li>Compute summary statistics likes means, medians, and standard deviations.</li>
<li>Create data visualizations.</li>
</ol>
<p>Let’s load the data, <code>select</code> only a subset of 6 of the variables, and look at the raw values. Recall you can look at the raw values by running <code>View(evals)</code> in the console to pop-up the spreadsheet viewer. Here however we present only a snapshot of 5 randomly chosen rows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">load</span>(<span class="kw">url</span>(<span class="st">&quot;http://www.openintro.org/stat/data/evals.RData&quot;</span>))
evals &lt;-<span class="st"> </span>evals <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(score, bty_avg)</code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-142">Table 6.1: </span>Random sample of 5 instructors</caption>
<thead>
<tr class="header">
<th></th>
<th align="right">score</th>
<th align="right">bty_avg</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>290</td>
<td align="right">3.6</td>
<td align="right">6.67</td>
</tr>
<tr class="even">
<td>341</td>
<td align="right">4.9</td>
<td align="right">3.50</td>
</tr>
<tr class="odd">
<td>199</td>
<td align="right">3.3</td>
<td align="right">2.33</td>
</tr>
<tr class="even">
<td>47</td>
<td align="right">4.4</td>
<td align="right">4.67</td>
</tr>
<tr class="odd">
<td>215</td>
<td align="right">4.7</td>
<td align="right">3.67</td>
</tr>
</tbody>
</table>
<p>While a full description of each of these variables can be found at <a href="https://www.openintro.org/stat/data/?data=evals">openintro.org</a>, let’s summarize what each of these variables mean</p>
<ol style="list-style-type: decimal">
<li><code>score</code>: Numerical variable of the average teaching score based on students evaluations between 1 and 5. This is the outcome variable <span class="math inline">\(y\)</span> of interest.</li>
<li><code>bty_avg</code>: Numerical variable of average “beauty” rating based on a panel of 6 students’ scores between 1 and 10. This is the numerical explanatory variable <span class="math inline">\(x\)</span> of interest. <!--
1. `ethnicity`: Categorical variable of with two levels, `minority` or `non-minority`.
1. `gender`: Categorical variable of (binary) gender `men` or `women`
1. `language`: Categorical variable of the instructor's native language: `english` or `non-english`.
1. `age`: A numerical variable of age (recall our discussion in Chapter \@ref(explore-dataframes) on why `age` is numerical here).
--></li>
</ol>
<p>Another way to look at the raw values is using the <code>glimpse()</code> function, which gives us a slightly different view of the data. We see that <code>Observations: 463</code>, indicating that there are 463 observations in <code>evals</code>, each correponding to a particular instructor at UT Austin. Expressed differently, each row in the data frame <code>evals</code> corresponds to one of 463 instructors.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">glimpse</span>(evals)</code></pre></div>
<pre><code>Observations: 463
Variables: 2
$ score   &lt;dbl&gt; 4.7, 4.1, 3.9, 4.8, 4.6, 4.3, 2.8, 4.1, 3.4, 4.5, 3.8, 4.5,...
$ bty_avg &lt;dbl&gt; 5.00, 5.00, 5.00, 5.00, 3.00, 3.00, 3.00, 3.33, 3.33, 3.17,...</code></pre>
<p>Since both the outcome variable <code>score</code> and the explanatory variable <code>bty_avg</code> are numerical, we can compute summary statistics about them such as the mean and median. Let’s take <code>evals</code>, then select only the two variables of interest for now, and pipe them into the <code>summary()</code> command which returns: the minimum (smallest) value, the first quartile, the median, the mean (average), the third quartile, and the maximum (largest) value.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">evals <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summary</span>()</code></pre></div>
<pre><code>     score         bty_avg    
 Min.   :2.30   Min.   :1.67  
 1st Qu.:3.80   1st Qu.:3.17  
 Median :4.30   Median :4.33  
 Mean   :4.17   Mean   :4.42  
 3rd Qu.:4.60   3rd Qu.:5.50  
 Max.   :5.00   Max.   :8.17  </code></pre>
<p>We get an idea of how the values in both variables are distributed. For example, the average teaching score was 4.17 out of 5 whereas the average beauty score was 4.42 out of 10. Furthermore, the middle 50% of teaching scores were between 3.80 and 4.6 (the first and third quartiles) while the middle 50% of beauty scores were between 3.17 and 5.5 out of 10.</p>
<p>The <code>summary()</code> function however only returns what are called <em>univariate</em> summaries i.e. summaries about single variables at a time. Since we are considering the relationship between two numerical variables, it would be nice to have a summary statistic that simultaneously considers both variables. The <em>correlation coefficient</em> is a <em>bivariate</em> summary statistic that fits this bill. <em>Coefficients</em> in general are quantitative expressions of a specific property of a phenomenon. A correlation coefficient is a quantitative expression between -1 and 1 that summarizes the <em>strength of the linear relationship between two numerical variables</em>:</p>
<ul>
<li>-1 indicates a perfect <em>negative relationship</em>: as the value of one variable goes up, the value of the other variable goes down.</li>
<li>0 indicates no relationship: the values of both variables go up/down independently of each other.</li>
<li>+1 indicates a perfect <em>positive relationship</em>: as the value of one variable goes up, the value of the other variable goes up as well.</li>
</ul>
<p>Figure <a href="6-regression.html#fig:correlation1">6.1</a> gives examples of different correlation coefficient values for hypothetical numerical variables <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span>. We see that while for a correlation coefficient of -0.75 there is still a negative relationship between <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span>, it is not as strong as the negative relationship between <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> when the correlation coefficient is -1.</p>
<div class="figure" style="text-align: center"><span id="fig:correlation1"></span>
<img src="ismaykim_files/figure-html/correlation1-1.png" alt="Different correlation coefficients" width="\textwidth" />
<p class="caption">
Figure 6.1: Different correlation coefficients
</p>
</div>
<p>The correlation coefficient is computed using the <code>cor()</code> function, where in this case the inputs to the function are the two numerical variables we want to calculate the correlation coefficient of. Recall from Chapter @(explore-dataframes) that the <code>$</code> pulls out specific variables from a data frame:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">cor</span>(evals<span class="op">$</span>score, evals<span class="op">$</span>bty_avg)</code></pre></div>
<pre><code>[1] 0.187</code></pre>
<p>In our case, the correlation coefficient of 0.187 indicates that the relationship between teaching evaluation score and beauty average is “weakly positive.” There is a certain amount of subjectivity in interpreting correlation coefficients, especially those that aren’t close to -1, 0, and 1. For help developing such intuition and more discussion on the correlation coefficient see Section <a href="6-regression.html#correlationcoefficient">6.3.1</a> below.</p>
<p>Let’s now proceed by visualizing this data. Since both the <code>score</code> and <code>bty_avg</code> variables are numerical, a scatterplot is an appropriate graph to visualize this data. Let’s do this using <code>geom_point()</code> and set informative axes labels and title.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(evals, <span class="kw">aes</span>(<span class="dt">x =</span> bty_avg, <span class="dt">y =</span> score)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Beauty Score&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Teaching Score&quot;</span>, <span class="dt">title =</span> <span class="st">&quot;Relationship of teaching and beauty scores&quot;</span>)</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:numxplot1"></span>
<img src="ismaykim_files/figure-html/numxplot1-1.png" alt="Instructor evaluation scores at UT Austin" width="\textwidth" />
<p class="caption">
Figure 6.2: Instructor evaluation scores at UT Austin
</p>
</div>
<p>However Figure <a href="6-regression.html#fig:numxplot1">6.2</a> suffers from <em>overplotting</em>. Recall from data visualization Chapter <a href="3-viz.html#overplotting">3.3.2</a> that overplotting occurs when several points are stacked directly on top of each other thereby obscuring the number of points. For example, let’s focus on the 6 points in the top-right of the plot with a beauty score of around 8 out of 10: are there truly only 6 points, or are there many more just stacked on top of each other? You can think of these as <em>ties</em>. Let’s break it up these ties with a little random “jitter” added to the points in Figure <a href="6-regression.html#fig:numxplot2">6.3</a>. Jittering adds a little random bump to each of the points to break up these ties. Note that the <code>geom_jitter</code> only alters the visual display of the points; the values in the data frame stay the same.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(evals, <span class="kw">aes</span>(<span class="dt">x =</span> bty_avg, <span class="dt">y =</span> score)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_jitter</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Beauty Score&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Teaching Score&quot;</span>, <span class="dt">title =</span> <span class="st">&quot;Relationship of teaching and beauty scores&quot;</span>)</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:numxplot2"></span>
<img src="ismaykim_files/figure-html/numxplot2-1.png" alt="Instructor evaluation scores at UT Austin: Jittered" width="\textwidth" />
<p class="caption">
Figure 6.3: Instructor evaluation scores at UT Austin: Jittered
</p>
</div>
<p>From Figure <a href="6-regression.html#fig:numxplot2">6.3</a> we make several observations:</p>
<ol style="list-style-type: decimal">
<li>Focusing our attention on the top-right of the plot again, we now see that those originally unjittered 6 points actually were actually 12!</li>
<li>A further interesting trend is that the jittering revealed a large number of instructors with beauty scores of between 3 and 4.5, towards the lower end of the beauty scale.</li>
<li>Most beauty scores lie between 2 and 8</li>
<li>Most teaching scores lie between 3 and 5</li>
<li>Recall our earlier computation of the correlation coefficient which describes the strength of the linear relationship between two numerical variables. Looking at Figure <a href="6-regression.html#fig:numxplot2">6.3</a>, it is not immediately apparent that these two variables are positively related. This is to be expected given the positive, but rather weak (close to 0), correlation coefficient of 0.187.</li>
</ol>
<p>Let’s improve on Figure <a href="6-regression.html#fig:numxplot2">6.3</a> by adding a “regression line” in Figure <a href="6-regression.html#fig:numxplot3">6.4</a>. This is easily done by adding a new layer to the <code>ggplot</code> code that created Figure <a href="6-regression.html#fig:numxplot2">6.3</a>: <code>+ geom_smooth(method=&quot;lm&quot;)</code>. A regression line is a “best fitting” line in that of all possible lines you could draw on this plot, it is “best” in terms of some mathematical criteria. We discuss the criteria for “best” in Section <a href="6-regression.html#leastsquares">6.3.3</a>, but we suggest you read this only after covering the concept of a <em>residual</em> coming up in Chapter <a href="6-regression.html#model1points">6.1.3</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(evals, <span class="kw">aes</span>(<span class="dt">x =</span> bty_avg, <span class="dt">y =</span> score)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_jitter</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Beauty Score&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Teaching Score&quot;</span>, <span class="dt">title =</span> <span class="st">&quot;Relationship of teaching and beauty scores&quot;</span>) <span class="op">+</span><span class="st">  </span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>)</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:numxplot3"></span>
<img src="ismaykim_files/figure-html/numxplot3-1.png" alt="Regression line" width="\textwidth" />
<p class="caption">
Figure 6.4: Regression line
</p>
</div>
<p>When viewed on this plot, the regression line is a visual summary of the relationship between two numerical variables, in our case the outcome variable <code>score</code> and the explanatory variable <code>bty_avg</code>. The positive slope of the blue line is consistent with our observed correlation coefficient of 0.187 suggesting that there is a positive relationship between <code>score</code> and <code>bty_avg</code>. We’ll see later however that while the correlation coefficient is not equal to the slope of this line, they always have the same sign: positive or negative.</p>
<p>What are the grey bands surrounding the blue line? These are <em>standard error</em> bands, which can be thought of as error/uncertainty bands. Let’s skip this idea for now and suppress these grey bars for now by adding the argument <code>se=FALSE</code> to <code>geom_smooth(method = &quot;lm&quot;)</code>. We’ll introduce standard errors in Chapter <a href="8-sampling.html#sampling">8</a> on sampling, use them for constructing <em>confidence intervals</em> and conducting <em>hypothesis tests</em> in Chapters <a href="9-ci.html#ci">9</a> and <a href="#ht"><strong>??</strong></a>, and consider them when we revisit regression in Chapter <a href="11-inference-for-regression.html#inference-for-regression">11</a></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(evals, <span class="kw">aes</span>(<span class="dt">x =</span> bty_avg, <span class="dt">y =</span> score)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_jitter</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Beauty Score&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Teaching Score&quot;</span>, <span class="dt">title =</span> <span class="st">&quot;Relationship of teaching and beauty scores&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="dt">se =</span> <span class="ot">FALSE</span>)</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:numxplot4"></span>
<img src="ismaykim_files/figure-html/numxplot4-1.png" alt="Regression line without error bands" width="\textwidth" />
<p class="caption">
Figure 6.5: Regression line without error bands
</p>
</div>
</div>
<div id="model1table" class="section level3">
<h3><span class="header-section-number">6.1.2</span> Simple linear regression</h3>
<p>If case you’ve forgotten from high school algebra, in general the equation of a line is <span class="math inline">\(y = a + bx\)</span> which is defined by two coefficients (which we defined earlier as “quantitative expressions of a specific property of a phenomenon):</p>
<ul>
<li>the intercept coefficient <span class="math inline">\(a\)</span>, or the value of <span class="math inline">\(y\)</span> when <span class="math inline">\(x=0\)</span>, and</li>
<li>the slope coefficient <span class="math inline">\(b\)</span>, or the increase in <span class="math inline">\(y\)</span> for every increase of one in <span class="math inline">\(x\)</span></li>
</ul>
<p>However, when defining a line specifically for regression, like the blue regression line in Figure <a href="6-regression.html#fig:numxplot4">6.5</a>, we use slightly different notation: the equation of the regression line is <span class="math inline">\(\widehat{y} = b_0 + b_1 x\)</span> where</p>
<ul>
<li>the intercept coefficient is <span class="math inline">\(b_0\)</span>, or the value of <span class="math inline">\(\widehat{y}\)</span> when <span class="math inline">\(x=0\)</span>, and</li>
<li>the slope coefficient <span class="math inline">\(b_1\)</span>, or the increase in <span class="math inline">\(\widehat{y}\)</span> for every increase of one in <span class="math inline">\(x\)</span></li>
</ul>
<p>Why do we put a “hat” on top of the <span class="math inline">\(y\)</span>? It’s a form of notation specific for regression, which we’ll introduce in the next subsection @ref{model1points} when we discuss <em>fitted values</em>. For now, let’s ignore the hat and treat the equation of the line as you would from high school algebra. We know looking at Figure <a href="6-regression.html#fig:numxplot4">6.5</a> that the slope coefficient corresponding to <code>bty_avg</code> should be positive. Why? Because as <code>bty_avg</code> increases, professors tend to roughly have larger teaching evaluation <code>scores</code>. However, what are the specific values of the intercept and slope coefficients? Let’s not worry about computing these by hand, but instead let the computer do the work for us, specifically R!</p>
<p>Let’s get the value of the intercept and slope coefficients by outputting something called the <em>linear regression table</em>. This is always done in a two-step process:</p>
<ol style="list-style-type: decimal">
<li>First “fit” the linear regression model to the <code>data</code> using the <code>lm()</code> function. <code>lm</code> stands for “linear model”, given that we are dealing with lines.</li>
<li>Then apply the <code>get_regression_table()</code> function from the <code>moderndive</code> R package to <code>score_model</code></li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lm</span>(score <span class="op">~</span><span class="st"> </span>bty_avg, <span class="dt">data =</span> evals) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">get_regression_table</span>(<span class="dt">digits =</span> <span class="dv">2</span>)</code></pre></div>
<table>
<caption><span id="tab:numxplot4b">Table 6.2: </span>Linear regression table</caption>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std_error</th>
<th align="right">statistic</th>
<th align="right">p_value</th>
<th align="right">lower_ci</th>
<th align="right">upper_ci</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">intercept</td>
<td align="right">3.880</td>
<td align="right">0.076</td>
<td align="right">50.96</td>
<td align="right">0</td>
<td align="right">3.731</td>
<td align="right">4.030</td>
</tr>
<tr class="even">
<td align="left">bty_avg</td>
<td align="right">0.067</td>
<td align="right">0.016</td>
<td align="right">4.09</td>
<td align="right">0</td>
<td align="right">0.035</td>
<td align="right">0.099</td>
</tr>
</tbody>
</table>
<p>Whoa! There is a lot going on, both in terms of the inputs and outputs! Let’s unpack this slowly. First, the <code>lm()</code> function that “fits” the linear regression model is typically used as <code>lm(y ~ x, data = DATA_FRAME_NAME)</code> where:</p>
<ul>
<li><code>y</code> is the outcome variable, followed by a tilde <code>~</code>, the key to the left of “1” on your keyboard. In our case, <code>y</code> is set to <code>score</code>.</li>
<li><code>x</code> is the explanatory variable. In our case, <code>x</code> is set to <code>bty_avg</code>. We call the combination <code>y ~ x</code> a <em>model formula</em>.</li>
<li><code>DATA_FAME_NAME</code> is the name of the data frame that contains the variables <code>y</code> and <code>x</code>. In our case the <code>evals</code> data frame.</li>
</ul>
<p>Then we pipe this output to be the input of the <code>get_regression_table()</code> function, just as when we discussed piping in Section <a href="5-wrangling.html#piping">5.1</a> in the data wrangling chapter. An additional arguments to the <code>get_regression_table()</code> function is <code>digits</code>, where we specify the number of significant digits of precision (number of digits after the decimal points) we want the regression table to have. <code>digits</code> defaults to 3, meaning if you don’t specify this argument, <code>digits = 3</code> is used by default. We’d like to point out that all the <code>get_regression_table()</code> function in the <code>moderndive</code> package does is generate regression table outputs that are clean and easy-to-read while hiding a lot of the code necessary to do so and not much else. This is known as a <em>wrapper function</em> in computer programming, which takes other functions and “wraps” them in a single function. While not necessary to understand regression, if you are curious to know what is going on under the hood of <code>get_regression_table()</code>, see Section <a href="6-regression.html#underthehood">6.3.4</a> below.</p>
<!--
1. `print` is a `TRUE`/`FALSE` value that sets whether or not the output should be in a print friendly format (specifically in Markdown table format suitable for use in R Markdown documents). `print` defaults to `FALSE`, meaning if you don't specify this argument, `print = FALSE` is used by default. We'll ignore the use of the `print` argument until Chapter \@ref(thinking-with-data) on "thinking with data."
-->
<p>Now let’s consider the outputted regression table, which has two rows denoted by the first column <code>term</code>: one corresponding to the intercept coefficient <span class="math inline">\(b_0\)</span> and one corresponding to the slope coefficient <span class="math inline">\(b_1\)</span> for <code>bty_avg</code>. The second column <code>estimate</code> gives us the “fitted” (or computed) values for both these coefficients. Therefore the blue regression line in Figure <a href="6-regression.html#fig:numxplot4">6.5</a> is <span class="math inline">\(\widehat{\text{score}} = b_0 + b_{\text{bty avg}} \text{bty avg} = 3.88 + 0.067\text{bty avg}\)</span> where</p>
<ul>
<li>The intercept coefficient <span class="math inline">\(b_0\)</span> = 3.88, meaning for instructors that had a hypothetical beauty score of 0, the would on average have a teaching score of 3.88. In this case however, while the intercept has a mathematical interpretation when defining the regression line, there is no <em>practical</em> interpretation since <code>score</code> is an average of a panel of 6 students’ ratings from 1 to 10, a <code>bty_avg</code> of 0 would be impossible. Furthermore, no instructors had a beauty score anywhere near 0.</li>
<li>Of more interest is the slope coefficient associated with <code>bty_avg</code> <span class="math inline">\(b_{\text{bty avg}}\)</span> = 0.067. This is a numerical quantity that summarizes the relationship between the outcome and explanatory variables. It is interpreted as follows, for every increase of 1 unit in <code>bty_avg</code>, there is an <em>associated</em> increase of <em>on average</em> 0.067 units of <code>score</code>. We note in particular that the sign of this slope is positive, suggesting a positive relationship between beauty scores and teaching scores. We are very careful with our wording:
<ul>
<li>We only stated that there is an <em>associated</em> increase, and not necessarily a <em>causal</em> increase. For example, perhaps its not that beauty directly affects teaching scores, but instead individuals from wealthier backgrounds tends to have had better education and training, and hence have higher teaching scores, but these same individuals also have higher beauty scores. Avoiding such reasoning can be summarized by the adage “correlation is not necessarily causation”. In other words, just because two variables are correlated, it doesn’t mean one directly causes the other. We discuss these ideas more in Section <a href="6-regression.html#correlation-is-not-causation">6.3.2</a>.<br />
</li>
<li>We say that this associated increase is <em>on average</em> 0.067 units of teaching <code>score</code> and not that the associated increase is <em>exactly</em> 0.067 units of <code>score</code> across all values of <code>bty_avg</code>. This is because the slope is the average increase across all points as shown by the regression line in Figure <a href="6-regression.html#fig:numxplot4">6.5</a>.</li>
</ul></li>
</ul>
<p>But what about the remaining 5 columns: <code>std_error</code>, <code>statistic</code>, <code>p_value</code>, <code>conf_low</code> and <code>conf_high</code>? They give you information on the <em>statistical significance</em> of these results, or their “meaningfulness.” We’ll revisit these in Chapter <a href="11-inference-for-regression.html#inference-for-regression">11</a> on (statistical) inference for regression after we’ve covered standard errors in Chapter <a href="8-sampling.html#sampling">8</a> (<code>std_error</code>), confidence intervals in Chapter <a href="9-ci.html#ci">9</a> (<code>conf_low</code> and <code>conf_high</code>), and hypothesis testing in Chapter <a href="10-hypo.html#hypo">10</a> (<code>statistic</code> and <code>p_value</code>). For now, we’ll only focus on the <code>term</code> and <code>estimate</code> columns.</p>
</div>
<div id="model1points" class="section level3">
<h3><span class="header-section-number">6.1.3</span> Observed/fitted values and residuals</h3>
<p>We just saw how to get the value of the intercept and the slope of the regression line from the regression table generated by <code>get_regression_table()</code>. Now instead, say we want information on individual points, in this case one of the <code>n=463</code> instructors in this dataset, one corresponding to each row of <code>evals</code>. For example, say we are interested in the 21st instructor in this dataset:</p>
<table>
<caption><span id="tab:unnamed-chunk-148">Table 6.3: </span>Data for 21st instructor</caption>
<thead>
<tr class="header">
<th align="right">score</th>
<th align="right">bty_avg</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">4.9</td>
<td align="right">7.33</td>
</tr>
</tbody>
</table>
<p>What is the value on the blue line corresponding to this instructors <code>bty_avg</code> of 7.333? In Figure <a href="6-regression.html#fig:numxplot5">6.6</a> we mark three values in particular corresponding to this instructor:</p>
<ul>
<li>The red circle corresponds to the <em>observed value</em> <span class="math inline">\(y\)</span> = 4.9 and corresponds to this instructors’ observed teaching score.</li>
<li>The red square corresponds to the <em>fitted value</em> <span class="math inline">\(\widehat{y}\)</span> = 4.369 and corresponds to the value on the regression line for <span class="math inline">\(x = 7.333\)</span>. We compute this value using the intercept and slope in the regression table above: <span class="math inline">\(\widehat{y} = b_0 + b_1 x = 3.88 + 0.067 \times 7.333 = 4.369\)</span></li>
<li>The length of the blue arrow is the <em>residual</em> <span class="math inline">\(y - \widehat{y}\)</span> = 4.9 - 4.369 = 0.531. The residual can be thought of as the error/lack-of-fit for this particular point. So the bigger the residual, the less the fitted value <span class="math inline">\(\widehat{y}\)</span> matches up with the observed value <span class="math inline">\(y\)</span>.</li>
</ul>
<div class="figure" style="text-align: center"><span id="fig:numxplot5"></span>
<img src="ismaykim_files/figure-html/numxplot5-1.png" alt="Example of observed value, fitted value, and residual" width="\textwidth" />
<p class="caption">
Figure 6.6: Example of observed value, fitted value, and residual
</p>
</div>
<p>What if we want both</p>
<ol style="list-style-type: decimal">
<li>the fitted value <span class="math inline">\(\widehat{y} = b_0 + b_1 \times x\)</span></li>
<li>the residual <span class="math inline">\(y - \widehat{y}\)</span></li>
</ol>
<p>not only the 21st instructor but</p>
<ul>
<li>for all 463 instructors in the study, in other words</li>
<li>for all 463 rows in the <code>evals</code> data frame, in other words</li>
<li>for all 463 points in regression plot in Figure <a href="6-regression.html#fig:numxplot4">6.5</a>?</li>
</ul>
<p>We could repeat the above calculations 463 times, but that would be tedious and time consuming. Instead, let’s use the <code>get_regression_points()</code> function that we’ve included in the <code>moderndive</code> R package. Note that in the table below we only present the results for 5 arbitrarily chosen rows out of 463.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">regression_points &lt;-<span class="st"> </span><span class="kw">get_regression_points</span>(score_model)
regression_points</code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-150">Table 6.4: </span>Regression points (5 arbitrarily chosen rows out of 463)</caption>
<thead>
<tr class="header">
<th align="right">ID</th>
<th align="right">score</th>
<th align="right">bty_avg</th>
<th align="right">score_hat</th>
<th align="right">residual</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">21</td>
<td align="right">4.9</td>
<td align="right">7.33</td>
<td align="right">4.37</td>
<td align="right">0.531</td>
</tr>
<tr class="even">
<td align="right">290</td>
<td align="right">3.6</td>
<td align="right">6.67</td>
<td align="right">4.33</td>
<td align="right">-0.725</td>
</tr>
<tr class="odd">
<td align="right">341</td>
<td align="right">4.9</td>
<td align="right">3.50</td>
<td align="right">4.11</td>
<td align="right">0.786</td>
</tr>
<tr class="even">
<td align="right">199</td>
<td align="right">3.3</td>
<td align="right">2.33</td>
<td align="right">4.04</td>
<td align="right">-0.736</td>
</tr>
<tr class="odd">
<td align="right">47</td>
<td align="right">4.4</td>
<td align="right">4.67</td>
<td align="right">4.19</td>
<td align="right">0.209</td>
</tr>
</tbody>
</table>
<p>Just as with the <code>get_regression_table()</code> function, the inputs to the <code>get_regression_points()</code> function are the same, however the outputs are different. Let’s inspect the individual columns:</p>
<ul>
<li>The <code>score</code> column represents the observed value of the outcome variable <span class="math inline">\(y\)</span></li>
<li>The <code>bty_avg</code> column represents the values of the explanatory variable <span class="math inline">\(x\)</span></li>
<li>The <code>score_hat</code> column represents the fitted values <span class="math inline">\(\widehat{y}\)</span></li>
<li>The <code>residual</code> column represents the residuals <span class="math inline">\(y - \widehat{y}\)</span></li>
</ul>
<p>The prove to ourselves that the results make sense, let’s manually replicate the internal computation that <code>get_regression_points()</code> performs using the <code>mutate()</code> verb from Chapter <a href="5-wrangling.html#wrangling">5</a></p>
<ol style="list-style-type: decimal">
<li>First we compute a duplicate of the fitted values <span class="math inline">\(\widehat{y} = b_0 + b_1 \times x\)</span> where the intercept <span class="math inline">\(b_0\)</span> = 3.88 and the slope <span class="math inline">\(b_1\)</span> = 0.067 and store these in <code>score_hat_2</code></li>
<li>Then we compute the a duplicated the residuals <span class="math inline">\(y - \widehat{y}\)</span> and store these in <code>residual_2</code></li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">regression_points &lt;-<span class="st"> </span>regression_points <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">score_hat_2 =</span> <span class="fl">3.880</span> <span class="op">+</span><span class="st"> </span><span class="fl">0.067</span> <span class="op">*</span><span class="st"> </span>bty_avg) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">residual_2 =</span> score <span class="op">-</span><span class="st"> </span>score_hat_<span class="dv">2</span>)
regression_points</code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-152">Table 6.5: </span>Regression points (5 arbitrarily chosen rows out of 463)</caption>
<thead>
<tr class="header">
<th align="right">ID</th>
<th align="right">score</th>
<th align="right">bty_avg</th>
<th align="right">score_hat</th>
<th align="right">residual</th>
<th align="right">score_hat_2</th>
<th align="right">residual_2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">21</td>
<td align="right">4.9</td>
<td align="right">7.33</td>
<td align="right">4.37</td>
<td align="right">0.531</td>
<td align="right">4.37</td>
<td align="right">0.529</td>
</tr>
<tr class="even">
<td align="right">290</td>
<td align="right">3.6</td>
<td align="right">6.67</td>
<td align="right">4.33</td>
<td align="right">-0.725</td>
<td align="right">4.33</td>
<td align="right">-0.727</td>
</tr>
<tr class="odd">
<td align="right">341</td>
<td align="right">4.9</td>
<td align="right">3.50</td>
<td align="right">4.11</td>
<td align="right">0.786</td>
<td align="right">4.11</td>
<td align="right">0.786</td>
</tr>
<tr class="even">
<td align="right">199</td>
<td align="right">3.3</td>
<td align="right">2.33</td>
<td align="right">4.04</td>
<td align="right">-0.736</td>
<td align="right">4.04</td>
<td align="right">-0.736</td>
</tr>
<tr class="odd">
<td align="right">47</td>
<td align="right">4.4</td>
<td align="right">4.67</td>
<td align="right">4.19</td>
<td align="right">0.209</td>
<td align="right">4.19</td>
<td align="right">0.207</td>
</tr>
</tbody>
</table>
<p>We see that our manually computed variables <code>score_hat_2</code> and <code>residual_2</code> equal the original results (up to rounding error).</p>
<p>At this point, we suggest you read Section <a href="6-regression.html#leastsquares">6.3.3</a>, where we explicity define how a regression line is a “best” fitting line.</p>
</div>
<div id="model1residuals" class="section level3">
<h3><span class="header-section-number">6.1.4</span> Residual analysis</h3>
<p>Recall the residuals can be thought of the error or the “lack-of-fit” between the observed value <span class="math inline">\(y\)</span> and the fitted value <span class="math inline">\(\widehat{y}\)</span> on the blue regression line in Figure <a href="6-regression.html#fig:numxplot4">6.5</a>. Ideally when we fit a regression model, we’d like there to be <em>no systematic pattern</em> to these residuals. In other words, the error is seemingly random. What does this mean?</p>
<ol style="list-style-type: decimal">
<li>The residuals should be on average 0. In other words, sometimes we’ll make a positive error, sometimes we’ll make a negative error, but on average the error is 0.</li>
<li>The spread of the residuals should be consistent.</li>
<li>The value of the residuals should not depend on the value of x. If it did, then the errors would not be seemingly random.</li>
</ol>
<p>Investigating any such patterns is known as <em>residual analysis</em>. Let’s perform our residual analysis in two ways. First, recall in Figure <a href="6-regression.html#fig:numxplot5">6.6</a> above we plotted:</p>
<ul>
<li>On the y-axis: <span class="math inline">\(y\)</span> teaching score</li>
<li>On the x-axis: <span class="math inline">\(x\)</span> beauty score</li>
<li>Blue arrow: one example of a residual</li>
</ul>
<p>Instead, in Figure <a href="6-regression.html#fig:numxplot6">6.7</a> below let’s plot</p>
<ul>
<li>On the y-axis: the residual <span class="math inline">\(y-\widehat{y}\)</span> instead</li>
<li>On the x-axis: <span class="math inline">\(x\)</span> beauty score (same as before)</li>
</ul>
<div class="figure" style="text-align: center"><span id="fig:numxplot6"></span>
<img src="ismaykim_files/figure-html/numxplot6-1.png" alt="Plot of residuals over beauty score" width="\textwidth" />
<p class="caption">
Figure 6.7: Plot of residuals over beauty score
</p>
</div>
<p>You can think of Figure <a href="6-regression.html#fig:numxplot6">6.7</a> as Figure <a href="6-regression.html#fig:numxplot5">6.6</a>, but with the blue line flattened out. Does it seem like there is <em>no systematic pattern</em> to the residuals? This question is rather qualitative and subjective in nature, thus different people may respond different. However, it can be argued that there isn’t a <em>drastic</em> pattern in the residuals.</p>
<p>Here are some hypothetical examples where there are <em>drastic</em> patterns to the residuals:</p>
<div class="figure" style="text-align: center"><span id="fig:numxplot7"></span>
<img src="ismaykim_files/figure-html/numxplot7-1.png" alt="Examples of less than ideal residual patterns" width="\textwidth" />
<p class="caption">
Figure 6.8: Examples of less than ideal residual patterns
</p>
</div>
<p>The second way to look at the residuals is using a histogram:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(regression_points, <span class="kw">aes</span>(<span class="dt">x =</span> residual)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="fl">0.25</span>, <span class="dt">color =</span> <span class="st">&quot;white&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Residual&quot;</span>)</code></pre></div>
<div class="figure" style="text-align: center">
<img src="ismaykim_files/figure-html/model1_residuals_hist-1.png" alt="Histogram of residuals" width="\textwidth" />
<p class="caption">
(#fig:model1_residuals_hist)Histogram of residuals
</p>
</div>
<p>This histogram seems to indicate that we have more positive residuals than negative. Since residual = <span class="math inline">\(y-\widehat{y} &gt; 0\)</span> when <span class="math inline">\(y &gt; \widehat{y}\)</span>, it seems our fitted teaching score from the regression model tend to <em>underestimate</em> the true teaching score. This histogram has a slight <em>left-skew</em> in that there is a long tail on the left. Another way to say this is this data exhibit a <em>negative skew</em>. Here are examples of an ideal and less than ideal patterns of residuals.</p>
<div class="figure" style="text-align: center"><span id="fig:numxplot9"></span>
<img src="ismaykim_files/figure-html/numxplot9-1.png" alt="Examples of ideal and less than ideal residual patterns" width="\textwidth" />
<p class="caption">
Figure 6.9: Examples of ideal and less than ideal residual patterns
</p>
</div>
<p>In fact, we’ll see later on that we would like the residuals to be <em>normally distributed</em> with mean 0. In other words, be bell-shaped and centered at 0! While this requirement and residual analysis in general may some of you as not being overly critical at this point, we’ll see later after we’ve covered <em>statistical inference</em> that for the last five columns of the regression table from earlier (std error, statistic, p-value, conf low, and conf high) to have valid interpretations, the above three conditions should roughly hold. More on this in Section .</p>
</div>
<div id="your-turn" class="section level3">
<h3><span class="header-section-number">6.1.5</span> Your Turn</h3>
<p>Repeat the above analysis where teaching <code>score</code> is the outcome variable, but now use <code>age</code> as the explanatory variable. Recall the steps:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">load</span>(<span class="kw">url</span>(<span class="st">&quot;http://www.openintro.org/stat/data/evals.RData&quot;</span>))
evals &lt;-<span class="st"> </span>evals <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(score, age)</code></pre></div>
<ol style="list-style-type: decimal">
<li>Perform an exploratory data analysis (EDA) by
<ol style="list-style-type: lower-alpha">
<li>Looking at the raw values</li>
<li>Computing summary statistics of the variables of interest</li>
<li>Creating informative visualizations</li>
</ol></li>
<li>Fit a linear regression model and get information about the “best-fitting” line from the regression table by using the <code>get_regression_table()</code> function</li>
<li>Get information on all <span class="math inline">\(n\)</span> data points AKA all <span class="math inline">\(n\)</span> rows in the dataset AKA all instructors, in particular the fitted values and the residuals, using the <code>get_regression_points()</code> function.</li>
<li>Perform a residual analysis and look for any systematic patterns in the residuals. Ideally, there should be little to no pattern.</li>
</ol>
</div>
</div>
<div id="model2" class="section level2">
<h2><span class="header-section-number">6.2</span> One categorical x</h2>
<p>It’s an unfortunate truth that life expectancy is not the same across various countries in the world; there are a multitude of factors that are associated with how long people live. International development agencies are very interested in studying these differences in the hope of understanding where governments should allocate resources to address this problem. One way to compare differences in life expectancy is between continents: “Do countries in certain continents have higher life expectancy?” or “Do certain continents have a lot of variation in life expectancy?”</p>
<p>To this end, let’s study the <code>gapminder</code> data frame in the <code>gapminder</code> package. Recall we introduced this dataset in Chapter <a href="3-viz.html#gapminder">3.1.2</a> when we first studied the “Grammar of Graphics”; in particular Figure <a href="3-viz.html#fig:gapminder">3.1</a>. This dataset has development data about various countries for 5-year intervals between 1952 and 2007. Let’s have</p>
<ul>
<li>Outcome variable <span class="math inline">\(y\)</span>: Mean life expectancy in 2007 for <span class="math inline">\(n=142\)</span> countries</li>
<li>Explanatory variables <span class="math inline">\(x\)</span>
<ul>
<li>continent</li>
<li>GDP per capita</li>
</ul></li>
</ul>
<p>Let’s load the <code>gapminder</code> data, <code>filter()</code> for only observations in 2007, <code>select()</code> only a subset of the variables, and save this in a data frame <code>gapminder2007</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gapminder)
gapminder2007 &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">2007</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(country, continent, lifeExp, gdpPercap)</code></pre></div>
<p>In this section we’ll try to explain between country differences in life expectancy as a function of which continent the country is located in. We’ll model the relationship between these two variables with linear regression again, but note that our explanatory variable <span class="math inline">\(x\)</span> is now categorical, and not numerical like when we covered simple linear regression in Section <a href="6-regression.html#model1">6.1</a>:</p>
<ol style="list-style-type: decimal">
<li>A numerical outcome variable <span class="math inline">\(y\)</span>, in this case <code>lifeExp</code></li>
<li>A single numerical explanatory variable <span class="math inline">\(x\)</span>, in this case <code>continent</code></li>
</ol>
<p>The concept of a “best-fitting” line is a little different when the explanatory variable <span class="math inline">\(x\)</span> is numerical; we’ll study these differences shortly.</p>
<div id="model2EDA" class="section level3">
<h3><span class="header-section-number">6.2.1</span> Exploratory data analysis</h3>
<p>Let’s look at the raw data values both by bringing up RStudio’s spreadsheet viewer, although in Table <a href="6-regression.html#tab:model2-data-preview">6.6</a> we only show 5 randomly selected countries out of 142, and using the <code>glimpse()</code> function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">View</span>(gapminder2007)</code></pre></div>
<table>
<caption><span id="tab:model2-data-preview">Table 6.6: </span>Random sample of 5 countries</caption>
<thead>
<tr class="header">
<th align="left">country</th>
<th align="left">continent</th>
<th align="right">lifeExp</th>
<th align="right">gdpPercap</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Netherlands</td>
<td align="left">Europe</td>
<td align="right">79.8</td>
<td align="right">36798</td>
</tr>
<tr class="even">
<td align="left">Paraguay</td>
<td align="left">Americas</td>
<td align="right">71.8</td>
<td align="right">4173</td>
</tr>
<tr class="odd">
<td align="left">Burundi</td>
<td align="left">Africa</td>
<td align="right">49.6</td>
<td align="right">430</td>
</tr>
<tr class="even">
<td align="left">Tanzania</td>
<td align="left">Africa</td>
<td align="right">52.5</td>
<td align="right">1107</td>
</tr>
<tr class="odd">
<td align="left">Venezuela</td>
<td align="left">Americas</td>
<td align="right">73.7</td>
<td align="right">11416</td>
</tr>
</tbody>
</table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">glimpse</span>(gapminder2007)</code></pre></div>
<pre><code>Observations: 142
Variables: 4
$ country   &lt;fct&gt; Afghanistan, Albania, Algeria, Angola, Argentina, Austral...
$ continent &lt;fct&gt; Asia, Europe, Africa, Africa, Americas, Oceania, Europe, ...
$ lifeExp   &lt;dbl&gt; 43.8, 76.4, 72.3, 42.7, 75.3, 81.2, 79.8, 75.6, 64.1, 79....
$ gdpPercap &lt;dbl&gt; 975, 5937, 6223, 4797, 12779, 34435, 36126, 29796, 1391, ...</code></pre>
<p>We see that the variable <code>continent</code> is indeed categorical, as it is encoded as <code>fctr</code> which stands for “factor”: R’s way of storing categorical variables. Let’s look at a summary of the explanatory variable <code>continent</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(gapminder2007<span class="op">$</span>continent)</code></pre></div>
<pre><code>  Africa Americas     Asia   Europe  Oceania 
      52       25       33       30        2 </code></pre>
<p>We observe that all continents have 25 countries or more, but Oceania only has two: Australia and New Zealand. Let’s now compute some summary statistics of the outcome variable <code>lifeExp</code>, in particular the worldwide median and mean life expectancy</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lifeExp_worldwide &lt;-<span class="st"> </span>gapminder2007 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">median =</span> <span class="kw">median</span>(lifeExp), <span class="dt">mean =</span> <span class="kw">mean</span>(lifeExp))</code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-159">Table 6.7: </span>Worldwide life expectancy</caption>
<thead>
<tr class="header">
<th align="right">median</th>
<th align="right">mean</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">71.9</td>
<td align="right">67</td>
</tr>
</tbody>
</table>
<p>Worldwide roughly half the countries had life expectancies of 71.935 years or less, while roughly half were higher. The mean however is lower at 67.007. Why are these two values different? Let’s look at a histogram of <code>lifeExp</code> to see why.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(gapminder2007, <span class="kw">aes</span>(<span class="dt">x =</span> lifeExp)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="dv">5</span>, <span class="dt">color =</span> <span class="st">&quot;white&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Life expectancy&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Number of countries&quot;</span>, <span class="dt">title =</span> <span class="st">&quot;Worldwide life expectancy&quot;</span>)</code></pre></div>
<p><img src="ismaykim_files/figure-html/unnamed-chunk-160-1.png" width="\textwidth" style="display: block; margin: auto;" /></p>
<p>We say that this data is <em>left-skewed</em>: there are a few countries with very low life expectancies that are bringing down the mean life expectancy. However, the median is less sensitive to the effects of such outliers. Hence the median is greater than the mean in this case. Let’s proceed by comparing median and mean life expectancy between continents by adding a <code>group_by(continent)</code> to the above code:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lifeExp_by_continent &lt;-<span class="st"> </span>gapminder2007 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(continent) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">median =</span> <span class="kw">median</span>(lifeExp), <span class="dt">mean =</span> <span class="kw">mean</span>(lifeExp))</code></pre></div>
<table>
<caption><span id="tab:catxplot0">Table 6.8: </span>Life expectancy by continent</caption>
<thead>
<tr class="header">
<th align="left">continent</th>
<th align="right">median</th>
<th align="right">mean</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Africa</td>
<td align="right">52.9</td>
<td align="right">54.8</td>
</tr>
<tr class="even">
<td align="left">Americas</td>
<td align="right">72.9</td>
<td align="right">73.6</td>
</tr>
<tr class="odd">
<td align="left">Asia</td>
<td align="right">72.4</td>
<td align="right">70.7</td>
</tr>
<tr class="even">
<td align="left">Europe</td>
<td align="right">78.6</td>
<td align="right">77.6</td>
</tr>
<tr class="odd">
<td align="left">Oceania</td>
<td align="right">80.7</td>
<td align="right">80.7</td>
</tr>
</tbody>
</table>
<p>We now that there are differences in life expectancies between the continents. For example, while the median life expectancy across all <span class="math inline">\(n = 142\)</span> countries in 2007 was 71.935, the median life expectancy across only the <span class="math inline">\(n =52\)</span> countries in Africa was only 52.927.</p>
<p>Let’s create an appropriate visualization. One way to compare the life expectancies of countries in different continents would be via a faceted histogram:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(gapminder2007, <span class="kw">aes</span>(<span class="dt">x =</span> lifeExp)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="dv">5</span>, <span class="dt">color =</span> <span class="st">&quot;white&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Life expectancy&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Number of countries&quot;</span>, <span class="dt">title =</span> <span class="st">&quot;Life expectancy by continent&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>continent, <span class="dt">nrow =</span> <span class="dv">2</span>)</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:catxplot0b"></span>
<img src="ismaykim_files/figure-html/catxplot0b-1.png" alt="Life expectancy in 2007" width="\textwidth" />
<p class="caption">
Figure 6.10: Life expectancy in 2007
</p>
</div>
<p>Another way would be via a boxplot, which is well suited for visualizing one numerical and one categorical variable:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(gapminder2007, <span class="kw">aes</span>(<span class="dt">x =</span> continent, <span class="dt">y =</span> lifeExp)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_boxplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Continent&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Life expectancy (years)&quot;</span>, <span class="dt">title =</span> <span class="st">&quot;Life expectancy by continent&quot;</span>) </code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:catxplot1"></span>
<img src="ismaykim_files/figure-html/catxplot1-1.png" alt="Life expectancy in 2007" width="\textwidth" />
<p class="caption">
Figure 6.11: Life expectancy in 2007
</p>
</div>
<p>We can now easily compare life expectancies between continents with single horizontal lines. Something that people new to boxplots forget is that the solid bars in the middle of the boxes correspond to <strong>medians and not means</strong>. Let’s modify this plot in two ways. First, let’s treat the median life expectancy years for Africa of 52.927 as a <em>baseline for comparison</em> are mark this value on the y-axis with a horizontal line via <code>geom_hline()</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(gapminder2007, <span class="kw">aes</span>(<span class="dt">x =</span> continent, <span class="dt">y =</span> lifeExp)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_boxplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Continent&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Life expectancy (years)&quot;</span>, <span class="dt">title =</span> <span class="st">&quot;Life expectancy by continent&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="fl">52.93</span>, <span class="dt">color =</span> <span class="st">&quot;red&quot;</span>)</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:catxplot1b"></span>
<img src="ismaykim_files/figure-html/catxplot1b-1.png" alt="Life expectancy in 2007" width="\textwidth" />
<p class="caption">
Figure 6.12: Life expectancy in 2007
</p>
</div>
<p>Second, let’s recenter the y-axis at Africa’s median life expectancy by subtracting 52.927 from all values. This allows us to focus on relative differences from Africa’s median life expectancy.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(gapminder2007, <span class="kw">aes</span>(<span class="dt">x =</span> continent, <span class="dt">y =</span> lifeExp <span class="op">-</span><span class="st"> </span><span class="fl">52.93</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_boxplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="fl">52.93</span> <span class="op">-</span><span class="st"> </span><span class="fl">52.93</span>, <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Continent&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Difference in life expectancy vs Africa (years)&quot;</span>,
       <span class="dt">title =</span> <span class="st">&quot;Life expectancy relative to Africa&quot;</span>)</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:catxplot2"></span>
<img src="ismaykim_files/figure-html/catxplot2-1.png" alt="Difference in life expectancy relative to African median of 52.93 years" width="\textwidth" />
<p class="caption">
Figure 6.13: Difference in life expectancy relative to African median of 52.93 years
</p>
</div>
<p>Using the “eyeball test”, we make the following observations:</p>
<ul>
<li>Differences in median life expectancy vs. the baseline for comparison, Africa’s median life expectancy of 52.927 years:
<ol style="list-style-type: decimal">
<li>The median life expectancy of the Americas is roughly 20 years greater.</li>
<li>The median life expectancy of Asia is roughly 20 years greater.</li>
<li>The median life expectancy of Europe is roughly 25 years greater.</li>
<li>The median life expectancy of Oceania is roughly 27.8 years greater.</li>
</ol></li>
<li>Africa and Asia have much more spread/variation in life expectancy as indicated by the interquartile range (the height of the boxes).</li>
<li>Oceania has almost no spread/variation, but this might in large part be due to the fact there are only two countries in Oceania.</li>
</ul>
</div>
<div id="model2table" class="section level3">
<h3><span class="header-section-number">6.2.2</span> Linear regression</h3>
<p>In Section <a href="6-regression.html#model1table">6.1.2</a> we introduced <em>simple</em> linear regression, which involves modeling the relationship between a numerical outcome variable <span class="math inline">\(y\)</span> as a function of a numerical explanatory variable <span class="math inline">\(x\)</span>, in our life expectancy example, we now have a categorical explanatory variable <span class="math inline">\(x\)</span> <code>continent</code>. While we still can fit a regression model, given our categorical explanatory variable we no longer have a concept of a “best-fitting” line, but differences relative to a baseline for comparison.</p>
<p>Before we fit our regression model, let’s create a table similar to Table <a href="6-regression.html#tab:catxplot0">6.8</a>, but</p>
<ol style="list-style-type: decimal">
<li>Report the mean life expectancy for each continent.</li>
<li>Report the difference in mean life expectancy <em>relative</em> to Africa’s mean life expectancy of 54.806 in the column “mean vs Africa”; this column is simple the “mean” column minus 54.806.</li>
</ol>
<p>Think back to your observations from the eye-ball test of Figure <a href="6-regression.html#fig:catxplot2">6.13</a> at the end of the last section. The column “mean vs Africa” is the same idea of comparing a summary statistic to a baseline for comparison, in this case the countries of Africa, but using means instead of medians.</p>
<table>
<caption><span id="tab:continent-mean-life-expectancies">Table 6.9: </span>Mean life expectancy by continent</caption>
<thead>
<tr class="header">
<th align="left">continent</th>
<th align="right">mean</th>
<th align="right">mean vs Africa</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Africa</td>
<td align="right">54.8</td>
<td align="right">0.0</td>
</tr>
<tr class="even">
<td align="left">Americas</td>
<td align="right">73.6</td>
<td align="right">18.8</td>
</tr>
<tr class="odd">
<td align="left">Asia</td>
<td align="right">70.7</td>
<td align="right">15.9</td>
</tr>
<tr class="even">
<td align="left">Europe</td>
<td align="right">77.6</td>
<td align="right">22.8</td>
</tr>
<tr class="odd">
<td align="left">Oceania</td>
<td align="right">80.7</td>
<td align="right">25.9</td>
</tr>
</tbody>
</table>
<p>Now, let’s use the <code>get_regression_table()</code> function we introduced in Section <a href="6-regression.html#model1table">6.1.2</a> to obtain the <em>regression table</em> for <code>gapminder2007</code> analysis:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lifeExp_model &lt;-<span class="st"> </span><span class="kw">lm</span>(lifeExp <span class="op">~</span><span class="st"> </span>continent, <span class="dt">data =</span> gapminder2007)
<span class="kw">get_regression_table</span>(lifeExp_model)</code></pre></div>
<table>
<caption><span id="tab:catxplot4b">Table 6.10: </span>Linear regression table</caption>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std_error</th>
<th align="right">statistic</th>
<th align="right">p_value</th>
<th align="right">lower_ci</th>
<th align="right">upper_ci</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">intercept</td>
<td align="right">54.8</td>
<td align="right">1.02</td>
<td align="right">53.45</td>
<td align="right">0</td>
<td align="right">52.8</td>
<td align="right">56.8</td>
</tr>
<tr class="even">
<td align="left">continentAmericas</td>
<td align="right">18.8</td>
<td align="right">1.80</td>
<td align="right">10.45</td>
<td align="right">0</td>
<td align="right">15.2</td>
<td align="right">22.4</td>
</tr>
<tr class="odd">
<td align="left">continentAsia</td>
<td align="right">15.9</td>
<td align="right">1.65</td>
<td align="right">9.68</td>
<td align="right">0</td>
<td align="right">12.7</td>
<td align="right">19.2</td>
</tr>
<tr class="even">
<td align="left">continentEurope</td>
<td align="right">22.8</td>
<td align="right">1.70</td>
<td align="right">13.47</td>
<td align="right">0</td>
<td align="right">19.5</td>
<td align="right">26.2</td>
</tr>
<tr class="odd">
<td align="left">continentOceania</td>
<td align="right">25.9</td>
<td align="right">5.33</td>
<td align="right">4.86</td>
<td align="right">0</td>
<td align="right">15.4</td>
<td align="right">36.5</td>
</tr>
</tbody>
</table>
<p>Just as before, we have the <code>term</code> and <code>estimates</code> columns of interest, but unlike before, we now have 5 rows corresponding to 5 outputs in our table: an intercept like before, but also <code>continentAmericas</code>, <code>continentAsia</code>, <code>continentEurope</code>, and <code>continentOceania</code>. What are these values?</p>
<ol style="list-style-type: decimal">
<li><code>intercept = 54.8</code> corresponds to the mean life expectancy for Africa. This mean life expectancy is treated as a baseline for comparison for the other continents.</li>
<li><code>continentAmericas = 18.8</code> is the difference in mean life expectancies of the Americas minus Africa. Note that 18.80 = 73.6 - 54.8 is the 2nd “mean vs Africa” value in Table <a href="6-regression.html#tab:continent-mean-life-expectancies">6.9</a>.</li>
<li><code>continentAmericas = 15.9</code> is the difference in mean life expectancy of Asia minus Africa. Note that 15.9 = 70.7 - 54.8 is the 2nd “mean vs Africa” value in Table <a href="6-regression.html#tab:continent-mean-life-expectancies">6.9</a>.</li>
<li><code>continentEurope = 22.8</code> is the difference in mean life expectancy of Europe minus Africa. Note that 22.8 = 77.6 - 54.8 is the 3rd “mean vs Africa” value in Table <a href="6-regression.html#tab:continent-mean-life-expectancies">6.9</a>.</li>
<li><code>continentOceania = 25.9</code> is the difference in mean life expectancy of Oceania minus Africa. Note that 25.9 = 80.7 - 54.8 is the 3rd “mean vs Africa” value in Table <a href="6-regression.html#tab:continent-mean-life-expectancies">6.9</a>.</li>
</ol>
<p>Let’s generalize this idea a bit. If we fit a linear regression model using an explanatory variable <span class="math inline">\(x\)</span> that has <span class="math inline">\(k\)</span> levels, a regression model will return an intercept and <span class="math inline">\(k-1\)</span> “slope” coefficients of differences in means relative to a baseline mean for comparison. In our case, since there are <span class="math inline">\(k=5\)</span> continents, the regression model returns an intercept corresponding to the baseline for comparison Africa and <span class="math inline">\(k-1=4\)</span> slope coefficients corresponding to the Americas, Asia, Europe, and Oceania. Africa was chosen as the baseline by R for no other reason than it is first alphabetically of the 5 continents. Note you can manually specify which continent to use as baseline, but we leave that to a more advanced course.</p>
</div>
<div id="model2points" class="section level3">
<h3><span class="header-section-number">6.2.3</span> Observed/fitted values and residuals</h3>
<p>What do fitted values <span class="math inline">\(\widehat{y}\)</span> and residuals <span class="math inline">\(y - \widehat{y}\)</span> correspond to when the explanatory variable <span class="math inline">\(x\)</span> is categorical? Let’s investigate these values for the first 10 countries in the <code>gapminder2007</code> dataset:</p>
<table>
<caption><span id="tab:unnamed-chunk-165">Table 6.11: </span>First 10 out of 142 countries</caption>
<thead>
<tr class="header">
<th align="left">country</th>
<th align="left">continent</th>
<th align="right">lifeExp</th>
<th align="right">gdpPercap</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Afghanistan</td>
<td align="left">Asia</td>
<td align="right">43.8</td>
<td align="right">975</td>
</tr>
<tr class="even">
<td align="left">Albania</td>
<td align="left">Europe</td>
<td align="right">76.4</td>
<td align="right">5937</td>
</tr>
<tr class="odd">
<td align="left">Algeria</td>
<td align="left">Africa</td>
<td align="right">72.3</td>
<td align="right">6223</td>
</tr>
<tr class="even">
<td align="left">Angola</td>
<td align="left">Africa</td>
<td align="right">42.7</td>
<td align="right">4797</td>
</tr>
<tr class="odd">
<td align="left">Argentina</td>
<td align="left">Americas</td>
<td align="right">75.3</td>
<td align="right">12779</td>
</tr>
<tr class="even">
<td align="left">Australia</td>
<td align="left">Oceania</td>
<td align="right">81.2</td>
<td align="right">34435</td>
</tr>
<tr class="odd">
<td align="left">Austria</td>
<td align="left">Europe</td>
<td align="right">79.8</td>
<td align="right">36126</td>
</tr>
<tr class="even">
<td align="left">Bahrain</td>
<td align="left">Asia</td>
<td align="right">75.6</td>
<td align="right">29796</td>
</tr>
<tr class="odd">
<td align="left">Bangladesh</td>
<td align="left">Asia</td>
<td align="right">64.1</td>
<td align="right">1391</td>
</tr>
<tr class="even">
<td align="left">Belgium</td>
<td align="left">Europe</td>
<td align="right">79.4</td>
<td align="right">33693</td>
</tr>
</tbody>
</table>
<p>Recall the <code>get_regression_points()</code> function we used in Section <a href="6-regression.html#model1points">6.1.3</a> that returns the fitted value and residual for</p>
<ul>
<li>for all 142 countries in our dataset</li>
<li>for all 142 rows in the <code>gapminder2007</code> data frame</li>
<li>for all 142 data points used in the five boxplots in Figure <a href="6-regression.html#fig:catxplot2">6.13</a></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">regression_points &lt;-<span class="st"> </span><span class="kw">get_regression_points</span>(lifeExp_model)
regression_points</code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-167">Table 6.12: </span>Regression points (First 10 out of 142 countries)</caption>
<thead>
<tr class="header">
<th align="right">ID</th>
<th align="right">lifeExp</th>
<th align="left">continent</th>
<th align="right">lifeExp_hat</th>
<th align="right">residual</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">43.8</td>
<td align="left">Asia</td>
<td align="right">70.7</td>
<td align="right">-26.900</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">76.4</td>
<td align="left">Europe</td>
<td align="right">77.6</td>
<td align="right">-1.226</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">72.3</td>
<td align="left">Africa</td>
<td align="right">54.8</td>
<td align="right">17.495</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">42.7</td>
<td align="left">Africa</td>
<td align="right">54.8</td>
<td align="right">-12.075</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">75.3</td>
<td align="left">Americas</td>
<td align="right">73.6</td>
<td align="right">1.712</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">81.2</td>
<td align="left">Oceania</td>
<td align="right">80.7</td>
<td align="right">0.515</td>
</tr>
<tr class="odd">
<td align="right">7</td>
<td align="right">79.8</td>
<td align="left">Europe</td>
<td align="right">77.6</td>
<td align="right">2.180</td>
</tr>
<tr class="even">
<td align="right">8</td>
<td align="right">75.6</td>
<td align="left">Asia</td>
<td align="right">70.7</td>
<td align="right">4.907</td>
</tr>
<tr class="odd">
<td align="right">9</td>
<td align="right">64.1</td>
<td align="left">Asia</td>
<td align="right">70.7</td>
<td align="right">-6.666</td>
</tr>
<tr class="even">
<td align="right">10</td>
<td align="right">79.4</td>
<td align="left">Europe</td>
<td align="right">77.6</td>
<td align="right">1.792</td>
</tr>
</tbody>
</table>
<p>Notice</p>
<ul>
<li>The fitted values <span class="math inline">\(\widehat{\text{lifeexp}}\)</span>. Countries in Africa have the same fitted value of 54.8, which is the mean life expectancy of Africa; countries in Asia have the same fitted value of 70.7, which is the mean life expectancy of Asia; this similarly holds for countries in the Americas, Europe, and Oceania.</li>
<li>The <code>residual</code> column is simply <span class="math inline">\(y - \widehat{y}\)</span> = <code>lifeexp - lifeexp_hat</code>. These values can be interpreted as that particular countries deviation from the mean life expectancy of the respective continent’s mean. For example, the first row of this dataset corresponds to Afghanistan, and the residual of -26.9 = 43.8</li>
<li>70.7 is Afghanistan’s mean life expectancy minus the mean life expectancy of all Asian countries.</li>
</ul>
</div>
<div id="model2residuals" class="section level3">
<h3><span class="header-section-number">6.2.4</span> Residual analysis</h3>
<p>Recall our discussion on residuals from Section <a href="6-regression.html#model1residuals">6.1.4</a> where our goal was to investigate whether or not there was a <em>systematic pattern</em> to the residuals, as ideally since residuals can be thought of as error, there should be no such pattern. While there are many ways to do such residual analysis, we focused on two approaches based on visualizations.</p>
<ol style="list-style-type: decimal">
<li>A plot with residuals on the y-axis and the predictor (in this case continent) on the x-axis</li>
<li>A histogram of all residuals</li>
</ol>
<p>First, let’s plot the residuals vs continent in Figure <a href="6-regression.html#fig:catxplot7">6.14</a>, but also let’s plot all 142 points with a little horizontal random jitter by setting the <code>width = 0.1</code> parameter in <code>geom_jitter()</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(regression_points, <span class="kw">aes</span>(<span class="dt">x =</span> continent, <span class="dt">y =</span> residual)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">width =</span> <span class="fl">0.5</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Continent&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Residual&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">0</span>, <span class="dt">col =</span> <span class="st">&quot;blue&quot;</span>)</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:catxplot7"></span>
<img src="ismaykim_files/figure-html/catxplot7-1.png" alt="Plot of residuals over continent" width="\textwidth" />
<p class="caption">
Figure 6.14: Plot of residuals over continent
</p>
</div>
<p>We observe:</p>
<ol style="list-style-type: decimal">
<li>While not perfectly balanced above and below the line <span class="math inline">\(y=0\)</span>, there seems to be a rough balance of both positive and negative residuals for all 5 continents.</li>
<li>However, there is one clear outlier in Asia. It has the smallest residual, hence also has the smallest life expectancy in Asia.</li>
</ol>
<p>Let’s see investigate the 5 countries in Asia with the shortest life expectancy:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gapminder2007 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(continent <span class="op">==</span><span class="st"> &quot;Asia&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(lifeExp)</code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-169">Table 6.13: </span>Countries in Asia with shortest life expectancy</caption>
<thead>
<tr class="header">
<th align="left">country</th>
<th align="left">continent</th>
<th align="right">lifeExp</th>
<th align="right">gdpPercap</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Afghanistan</td>
<td align="left">Asia</td>
<td align="right">43.8</td>
<td align="right">975</td>
</tr>
<tr class="even">
<td align="left">Iraq</td>
<td align="left">Asia</td>
<td align="right">59.5</td>
<td align="right">4471</td>
</tr>
<tr class="odd">
<td align="left">Cambodia</td>
<td align="left">Asia</td>
<td align="right">59.7</td>
<td align="right">1714</td>
</tr>
<tr class="even">
<td align="left">Myanmar</td>
<td align="left">Asia</td>
<td align="right">62.1</td>
<td align="right">944</td>
</tr>
<tr class="odd">
<td align="left">Yemen, Rep.</td>
<td align="left">Asia</td>
<td align="right">62.7</td>
<td align="right">2281</td>
</tr>
</tbody>
</table>
<p>This was the earlier identified residual for Afghanistan of -26.9. Unfortunately given recent geopolitical turmoil, individuals who live in Afghanistan have a drastically lower life expectancy.</p>
<p>Second, let’s look at a histogram of all 142 values of residuals in Figure <a href="6-regression.html#fig:catxplot8">6.15</a>. In this case, the residuals form a rather nice bell-shape, although there are a couple of very low and very high values at the tails. As we said previously, searching for patterns in residuals can be somewhat subjective, but ideally we hope there are no “drastic” patterns.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(regression_points, <span class="kw">aes</span>(<span class="dt">x =</span> residual)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="dv">5</span>, <span class="dt">color =</span> <span class="st">&quot;white&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Residual&quot;</span>)</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:catxplot8"></span>
<img src="ismaykim_files/figure-html/catxplot8-1.png" alt="Histogram of residuals" width="\textwidth" />
<p class="caption">
Figure 6.15: Histogram of residuals
</p>
</div>
</div>
<div id="your-turn-1" class="section level3">
<h3><span class="header-section-number">6.2.5</span> Your turn</h3>
<p>Repeat this same analysis but using GDP per capita <code>gdpPercap</code> as the outcome variable. Recall the four steps we’ve been following:</p>
<ol style="list-style-type: decimal">
<li>Perform an exploratory data analysis (EDA)</li>
<li>Fit a linear regression model and get information about the model</li>
<li>Get information on all <span class="math inline">\(n\)</span> data points considered in this analysis.</li>
<li>Perform a residual analysis and look for any systematic patterns in the residuals.</li>
</ol>
</div>
</div>
<div id="other-topics" class="section level2">
<h2><span class="header-section-number">6.3</span> Other topics</h2>
<div id="correlationcoefficient" class="section level3">
<h3><span class="header-section-number">6.3.1</span> Correlation coefficient</h3>
<p>Let’s replot Figure <a href="6-regression.html#fig:correlation1">6.1</a>, but now consider a broader range of correlation coefficient values in Figure <a href="6-regression.html#fig:correlation2">6.16</a>.</p>
<div class="figure" style="text-align: center"><span id="fig:correlation2"></span>
<img src="ismaykim_files/figure-html/correlation2-1.png" alt="Different Correlation Coefficients" width="\textwidth" />
<p class="caption">
Figure 6.16: Different Correlation Coefficients
</p>
</div>
<p>As we suggested in Chapter <a href="6-regression.html#model1EDA">6.1.1</a>, interpreting coefficients that are not close to the extreme values of -1 and 1 can be subjective. To develop your sense of correlation coefficients, we suggest you play the following 80’s-style video game called “Guess the correlation”! Click on the image below:</p>
<center>
<a target="_blank" href="http://guessthecorrelation.com/"><img src="images/guess_the_correlation.png" title="Guess the correlation" width="600"/></a>
</center>
<p>What if in instead we looked the correlation coefficient between <code>Income</code> and credit card <code>Balance</code>, where <code>Income</code> was in dollars and not thousands of dollars? i.e. we multiply <code>Income</code> by 1000?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ISLR)
Credit <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(Balance, Limit, Income) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Income =</span> Income <span class="op">*</span><span class="st"> </span><span class="dv">1000</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">cor</span>()</code></pre></div>
<table>
<caption><span id="tab:cor-credit-2">Table 6.14: </span>Correlation between income (in $) and credit card balance</caption>
<thead>
<tr class="header">
<th></th>
<th align="right">Balance</th>
<th align="right">Limit</th>
<th align="right">Income</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Balance</td>
<td align="right">1.000</td>
<td align="right">0.862</td>
<td align="right">0.464</td>
</tr>
<tr class="even">
<td>Limit</td>
<td align="right">0.862</td>
<td align="right">1.000</td>
<td align="right">0.792</td>
</tr>
<tr class="odd">
<td>Income</td>
<td align="right">0.464</td>
<td align="right">0.792</td>
<td align="right">1.000</td>
</tr>
</tbody>
</table>
<p>We see it is the same! We say that correlation coefficient is invariant to linear transformations! In other words</p>
<ul>
<li>The correlation between <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> will be the same as</li>
<li>The correlation between <span class="math inline">\(a\times x + b\)</span> and <span class="math inline">\(y\)</span> where <span class="math inline">\(a, b\)</span> are numerical values (real numbers in mathematical terms)</li>
</ul>
</div>
<div id="correlation-is-not-causation" class="section level3">
<h3><span class="header-section-number">6.3.2</span> Correlation is not necessarily causation</h3>
<p>Causation is a tricky problem and frequently takes either carefully designed experiments or methods to control for the effects of potential confounding variables. Both these approaches attempt either to remove all confounding variables or take them into account as best they can, and only focus on the behavior of a outcome variable in the presence of the levels of the other variable(s). Be careful as you read studies to make sure that the writers aren’t falling into this fallacy of correlation implying causation. If you spot one, you may want to send them a link to <a href="http://www.tylervigen.com/spurious-correlations">Spurious Correlations</a>.</p>
</div>
<div id="leastsquares" class="section level3">
<h3><span class="header-section-number">6.3.3</span> Best fitting line</h3>
<p>Regression lines are also known as “best fitting lines”. But what do we mean by best? Let’s unpack the criteria that is used by regression to determine best. Recall the plot in Figure <a href="6-regression.html#fig:numxplot5">6.6</a> where for a instructor with a beauty average score of <span class="math inline">\(x=7.333\)</span></p>
<ul>
<li>The observed value <span class="math inline">\(y=4.9\)</span> was marked with a red circle</li>
<li>The fitted value <span class="math inline">\(\widehat{y} = 4.369\)</span> on the regression line was marked with a red square</li>
<li>The residual <span class="math inline">\(y-\widehat{y} = 4.9-4.369 = 0.531\)</span> was the length of the blue arrow.</li>
</ul>
<p>Let’s do this for another arbitrarily chosen instructor whose beauty score was <span class="math inline">\(x=2.333\)</span>. The residual in this case is <span class="math inline">\(2.7 - 4.036 = -1.336\)</span>.</p>
<p><img src="ismaykim_files/figure-html/unnamed-chunk-170-1.png" width="\textwidth" style="display: block; margin: auto;" /></p>
<p>Let’s do this for another arbitrarily chosen instructor whose beauty score was <span class="math inline">\(x=3.667\)</span>. The residual in this case is <span class="math inline">\(4.4 - 4.125 = 0.2753\)</span>.</p>
<p><img src="ismaykim_files/figure-html/unnamed-chunk-171-1.png" width="\textwidth" style="display: block; margin: auto;" /></p>
<p>Let’s do this for another arbitrarily chosen instructor whose beauty score was <span class="math inline">\(x=6\)</span>. The residual in this case is <span class="math inline">\(3.8 - 4.28 = -0.4802\)</span>.</p>
<p><img src="ismaykim_files/figure-html/here-1.png" width="\textwidth" style="display: block; margin: auto;" /></p>
<p>Now let’s say we repeated this process for all 463 instructors in our dataset. Regression <em>minimizes the sum of all 463 arrow lengths squared.</em> In other words, it minimizes the sum of the squared residuals:</p>
<p><span class="math display">\[
\sum_{i=1}^{n}(y_i - \widehat{y}_i)^2
\]</span></p>
<p>We square the arrow lengths so that positive and negative deviations of the same amount are treated equally. That’s why alternative names for the simple linear regression line are the <strong>least-squares line</strong> and the <strong>best fitting line</strong>. It can be proven via calculus and linear algebra that this line uniquely minimizes the sum of the squared arrow lengths.</p>
<p>For the regression line in the plot, the sum of the squared residuals is 131.879.</p>
</div>
<div id="underthehood" class="section level3">
<h3><span class="header-section-number">6.3.4</span> How does <code>get_regression_table()</code> work?</h3>
</div>
<div id="script-of-r-code-3" class="section level3">
<h3><span class="header-section-number">6.3.5</span> Script of R code</h3>
<p>An R script file of all R code used in this chapter is available <a href="https://moderndive.netlify.com/scripts/06-regression.R">here</a>.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="5-wrangling.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="7-multiple-regression.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ismayc/moderndiver-book/edit/master/06-regression.Rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
